{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/system/menu/components/formAuthorize/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/system/menu/components/formAuthorize/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _authorize = require(\"@/api/system/authorize\");\nvar _formAuthorize = require(\"@/api/system/formAuthorize\");\nvar _Form = _interopRequireDefault(require(\"./Form\"));\nvar _BatchForm = _interopRequireDefault(require(\"./BatchForm\"));\nvar _connectForm = _interopRequireDefault(require(\"../connectForm\"));\nvar _dataSource = require(\"@/api/systemData/dataSource\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = exports.default = {\n  components: {\n    Form: _Form.default,\n    BatchForm: _BatchForm.default,\n    FormConnectForm: _connectForm.default\n  },\n  data: function data() {\n    return {\n      listDrawer: false,\n      formVisible: false,\n      batchFormVisible: false,\n      FormConnectFormVisible: false,\n      dialogTitle: \"\",\n      listQuery: {\n        keyword: \"\"\n      },\n      moduleId: \"\",\n      loading: false,\n      btnLoading: false,\n      listLoading: false,\n      treeList: [],\n      menuType: 2,\n      dbOptions: [],\n      dbList: [],\n      tableName: \"\",\n      dataType: \"\"\n    };\n  },\n  methods: {\n    init: function init(moduleId, fullName, type, dataType) {\n      var _this = this;\n      this.menuType = type; /* 2=代码生成 3=在线 */\n      this.dataType = dataType;\n      this.listDrawer = true;\n      this.moduleId = moduleId;\n      this.dialogTitle = \"\\u8868\\u5355\\u6743\\u9650 - \".concat(fullName);\n      this.dbList = [];\n      this.dbOptions = [];\n      this.$nextTick(function () {\n        if (_this.$refs[\"FormConnectForm\"]) {\n          _this.$refs[\"FormConnectForm\"].dataForm.dataSelect = \"\";\n        }\n        _this.listQuery.keyword = \"\";\n        _this.getList();\n      });\n      if (this.menuType === 2) {\n        this.getDataSourceListAll();\n        this.getInfo();\n      }\n    },\n    getDataSourceListAll: function getDataSourceListAll() {\n      var _this2 = this;\n      (0, _dataSource.getDataSourceListAll)().then(function (res) {\n        var list = res.data.list || [];\n        _this2.dbOptions = list.filter(function (o) {\n          return o.children && o.children.length;\n        });\n      });\n    },\n    getInfo: function getInfo() {\n      var _this3 = this;\n      (0, _authorize.getInfo)(this.moduleId, this.dataType).then(function (res) {\n        _this3.dataList = res.data || {};\n        _this3.tableName = _this3.dataList.linkTables || '';\n      });\n    },\n    //数据连接\n    addDataConnect: function addDataConnect() {\n      var _this4 = this;\n      this.FormConnectFormVisible = true;\n      this.$nextTick(function () {\n        _this4.$refs.FormConnectForm.init(_this4.dataList, _this4.moduleId, _this4.dbOptions, _this4.dataType);\n      });\n    },\n    getConnectList: function getConnectList(tableName) {\n      this.tableName = tableName || '';\n      this.getInfo();\n    },\n    getList: function getList() {\n      var _this5 = this;\n      this.listLoading = true;\n      (0, _formAuthorize.getFormAuthorizeList)(this.moduleId, this.listQuery).then(function (res) {\n        _this5.treeList = res.data.list;\n        _this5.listLoading = false;\n        _this5.btnLoading = false;\n      }).catch(function () {\n        _this5.listLoading = false;\n        _this5.btnLoading = false;\n      });\n    },\n    handleReLoad: function handleReLoad() {\n      this.btnLoading = true;\n      this.getList();\n    },\n    handleUpdateState: function handleUpdateState(row) {\n      var _this6 = this;\n      var txt = row.enabledMark ? \"禁用\" : \"开启\";\n      this.$confirm(\"\\u60A8\\u786E\\u5B9A\\u8981\".concat(txt, \"\\u5F53\\u524D\\u8868\\u5355\\u6743\\u9650\\u5417, \\u662F\\u5426\\u7EE7\\u7EED?\"), \"提示\", {\n        type: \"warning\"\n      }).then(function () {\n        (0, _formAuthorize.updateFormState)(row.id).then(function (res) {\n          _this6.$message({\n            type: \"success\",\n            message: res.msg,\n            duration: 1000,\n            onClose: function onClose() {\n              row.enabledMark = row.enabledMark ? 0 : 1;\n            }\n          });\n        });\n      }).catch(function () {});\n    },\n    addOrUpdateHandle: function addOrUpdateHandle(id) {\n      var _this7 = this;\n      this.formVisible = true;\n      this.$nextTick(function () {\n        _this7.$refs.form.init(_this7.moduleId, id, _this7.menuType, _this7.dataType);\n      });\n    },\n    handleBatchAdd: function handleBatchAdd() {\n      var _this8 = this;\n      this.batchFormVisible = true;\n      this.$nextTick(function () {\n        _this8.$refs.batchForm.init(_this8.moduleId);\n      });\n    },\n    handleDel: function handleDel(id) {\n      var _this9 = this;\n      this.$confirm(this.$t(\"common.delTip\"), this.$t(\"common.tipTitle\"), {\n        type: \"warning\"\n      }).then(function () {\n        (0, _formAuthorize.delForm)(id).then(function (res) {\n          _this9.$message({\n            type: \"success\",\n            message: res.msg,\n            duration: 1500,\n            onClose: function onClose() {\n              _this9.getList();\n            }\n          });\n        });\n      }).catch(function () {});\n    }\n  }\n};",null]}