{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/workFlow/components/FlowBox.vue?vue&type=template&id=604664ac&scoped=true","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/workFlow/components/FlowBox.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<!-- <transition name=\"el-zoom-in-center\"> -->\n<div class=\"JNPF-preview-main flow-form-main\">\n  <div class=\"JNPF-common-page-header\">\n    <div v-if=\"setting.fromForm\">{{title}}</div>\n    <el-page-header @back=\"goBack\" v-else>\n      <template slot=\"content\">\n        <div class=\"JNPF-page-header-content\">{{title}}</div>\n      </template>\n    </el-page-header>\n    <template v-if=\"!loading||title\">\n      <el-dropdown placement=\"bottom\" @command=\"handleFlowUrgent\" trigger=\"click\"\n        v-show=\"setting.opType=='-1'\">\n        <div class=\"flow-urgent-value\" style=\"cursor:pointer\">\n          <span :style=\"{'background-color':flowUrgentList[selectState].color}\"\n            class=\"color-box\"></span>\n          <span :style=\"{'color':flowUrgentList[selectState].color}\">\n            {{flowUrgentList[selectState].name}}</span>\n        </div>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item v-for=\"(item,index) in flowUrgentList\" :key=\"index\"\n            :command=\"item.state\">\n            <span :style=\"{'background-color':item.color}\" class=\"color-box\">\n            </span>\n            {{item.name}}\n          </el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n      <div class=\"flow-urgent-value\" v-show=\"setting.opType!=='-1'\">\n        <span :style=\"{'background-color':flowUrgentList[selectState].color}\"\n          class=\"color-box\"></span>\n        <span\n          :style=\"{'color':flowUrgentList[selectState].color}\">{{flowUrgentList[selectState].name}}</span>\n      </div>\n    </template>\n    <div class=\"options\" v-if=\"!subFlowVisible\">\n      <el-dropdown class=\"dropdown\" placement=\"bottom\" @command=\"handleMore\"\n        v-if=\"moreBtnList.length\">\n        <el-button style=\"width:70px\" :disabled=\"allBtnDisabled\">\n          更 多<i class=\"el-icon-arrow-down el-icon--right\"></i>\n        </el-button>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item class=\"dropdown-item\" v-for=\"(item,index) in moreBtnList\" :key=\"index\"\n            :command=\"item.key\">{{item.label}}</el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n      <el-button v-if=\"setting.opType=='-1'\" type=\"primary\" @click=\"eventLauncher('submit')\"\n        :loading=\"candidateLoading\" :disabled=\"allBtnDisabled\">\n        {{properties.submitBtnText||'提 交'}}</el-button>\n      <el-button type=\"primary\" @click=\"eventLauncher('audit')\" :loading=\"candidateLoading\"\n        v-if=\"setting.opType == 1&&properties.hasAuditBtn\">{{properties.auditBtnText||'通 过'}}\n      </el-button>\n      <el-button type=\"primary\" @click=\"press()\"\n        v-if=\"setting.opType == 0 && setting.status == 1&&(properties.hasPressBtn || properties.hasPressBtn===undefined)\">\n        {{properties.pressBtnText||'催 办'}}</el-button>\n      <el-button type=\"danger\" v-if=\"setting.opType == 2 && properties.hasRevokeBtn\"\n        @click=\"actionLauncher('recall')\">{{properties.revokeBtnText||'撤 回'}}</el-button>\n      <el-button type=\"danger\" v-if=\"setting.opType == 4 && setting.status==1 && !noOperateAuth\"\n        @click=\"actionLauncher('cancel')\">\n        终 止</el-button>\n      <el-button @click=\"goBack()\" v-if=\"!setting.hideCancelBtn\" :disabled=\"allBtnDisabled\">\n        {{$t('common.cancelButton')}}\n      </el-button>\n    </div>\n  </div>\n  <div class=\"approve-result\"\n    v-if=\"(setting.opType==0||setting.opType==4) && activeTab==='0' &&!subFlowVisible\">\n    <div class=\"approve-result-img\" :class=\"flowTaskInfo.status | flowStatus()\"></div>\n  </div>\n  <el-tabs class=\"JNPF-el_tabs\" v-model=\"activeTab\">\n    <el-tab-pane label=\"表单信息\" v-loading=\"loading\" v-if=\"setting.opType!='4'&&!subFlowVisible\">\n      <component :is=\"currentView\" @close=\"goBack\" ref=\"form\" :config=\"setting\"\n        @eventReceiver=\"eventReceiver\" @setLoad=\"setLoad\" @setCandidateLoad=\"setCandidateLoad\"\n        @setPageLoad=\"setPageLoad\" />\n    </el-tab-pane>\n    <el-tab-pane label=\"流程信息\" v-loading=\"loading\">\n      <template v-if=\"!subFlowVisible\">\n        <Process :conf=\"flowTemplateJson\" id=\"Process\" v-if=\"flowTemplateJson.nodeId\"\n          @subFlow='subFlow' :key=\"processKey\" />\n      </template>\n      <template v-else>\n        <el-tabs v-model=\"subFlowTab\" @tab-click=\"activeClick\" type=\"card\">\n          <el-tab-pane v-for=\"(item,index) in subFlowInfoList\" :key=\"index\"\n            :label=\"item.flowTaskInfo.fullName\" :name=\"item.flowTaskInfo.id\">\n            <Process :conf=\"item.flowTemplateInfo.flowTemplateJson\" :key=\"processKey\" />\n          </el-tab-pane>\n        </el-tabs>\n      </template>\n    </el-tab-pane>\n    <el-tab-pane label=\"流转记录\"\n      v-if=\"setting.opType!='-1' || (setting.opType == '-1' && setting.status == 7)\"\n      v-loading=\"loading\">\n      <recordList :list='flowTaskOperatorRecordList' :endTime='endTime' :flowId=\"setting.flowId\"\n        :opType=\"setting.opType\" @handelNodeLog='handelNodeLog' />\n    </el-tab-pane>\n    <el-tab-pane label=\"审批汇总\" v-if=\"setting.opType!='-1' && isSummary\" v-loading=\"loading\"\n      name=\"recordSummary\">\n      <RecordSummary :id='setting.id' :summaryType=\"summaryType\" ref=\"recordSummary\" />\n    </el-tab-pane>\n    <el-tab-pane label=\"流程评论\" v-if=\"setting.opType!='-1' && isComment\" v-loading=\"loading\"\n      name=\"comment\">\n      <Comment :id='setting.id' ref=\"comment\" />\n    </el-tab-pane>\n  </el-tabs>\n  <el-dialog :title=\"eventType==='audit'?'审批通过':'审批退回'\" :close-on-click-modal=\"false\"\n    :visible.sync=\"visible\" class=\"JNPF-dialog JNPF-dialog_center\" lock-scroll append-to-body\n    :before-close=\"beforeClose\" width='600px'>\n    <el-form ref=\"candidateForm\" :model=\"candidateForm\"\n      :label-width=\"candidateForm.candidateList.length||branchList.length?'130px':'80px'\">\n      <template v-if=\"eventType==='audit'\">\n        <el-form-item label=\"分支选择\" prop=\"branchList\" v-if=\"branchList.length\"\n          :rules=\"[{ required: true, message: `分支不能为空`, trigger: 'change' }]\">\n          <el-select v-model=\"candidateForm.branchList\" multiple placeholder=\"请选择审批分支\" clearable\n            @change=\"onBranchChange\">\n            <el-option v-for=\"item in branchList\" :key=\"item.nodeId\" :label=\"item.nodeName\"\n              :value=\"item.nodeId\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"item.nodeName+item.label\" :prop=\"'candidateList.' + i + '.value'\"\n          v-for=\"(item,i) in candidateForm.candidateList\" :key=\"i\" :rules=\"item.rules\">\n          <candidate-user-select v-model=\"item.value\" multiple :placeholder=\"'请选择'+item.label\"\n            :taskId=\"setting.taskId\" :formData=\"formData\" :nodeId=\"item.nodeId\"\n            v-if=\"item.hasCandidates\" />\n          <JnpfUserSelect v-model=\"item.value\" multiple :placeholder=\"'请选择'+item.label\"\n            title=\"候选人员\" v-else />\n        </el-form-item>\n      </template>\n      <template v-if=\"properties.rejectType &&eventType!=='audit'&&showReject\">\n        <el-form-item label=\"退回节点\" prop=\"rejectStep\">\n          <el-select v-model=\"candidateForm.rejectStep\" placeholder=\"请选择退回节点\"\n            :disabled='properties.rejectStep!==\"2\"'>\n            <el-option v-for=\"item in rejectList\" :key=\"item.nodeCode\" :label=\"item.nodeName\"\n              :value=\"item.nodeCode\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <template v-if=\"properties.rejectType==3\">\n          <el-form-item prop=\"rejectRadio\">\n            <el-radio-group v-model=\"candidateForm.rejectType\" class=\"form-item-content\">\n              <el-radio :label=1>重新审批\n                <el-tooltip content=\"若流程为A->B->C,C退回至A，则C->A->B->C\" placement=\"top\">\n                  <i class=\"el-icon-question tooltip-question\"></i>\n                </el-tooltip>\n              </el-radio>\n              <el-radio :label=2>直接提交给我\n                <el-tooltip content=\"若流程为A->B->C,C退回至A，则C->A->C\" placement=\"top\">\n                  <i class=\"el-icon-question tooltip-question\"></i>\n                </el-tooltip>\n              </el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </template>\n      </template>\n      <template v-if=\"properties.hasOpinion\">\n        <el-form-item label=\"审批意见\" prop=\"handleOpinion\">\n          <el-input v-model=\"candidateForm.handleOpinion\" placeholder=\"请输入审批意见\" type=\"textarea\"\n            :rows=\"4\" />\n          <CommonWordsDialog ref=\"commonWordsDialog\" @change=\"common\" />\n        </el-form-item>\n        <el-form-item label=\"审批附件\" prop=\"fileList\">\n          <JnpfUploadFile v-model=\"candidateForm.fileList\" :limit=\"3\" />\n        </el-form-item>\n      </template>\n      <el-form-item label=\"手写签名\" required v-if=\"properties.hasSign\">\n        <div class=\"sign-main\">\n          <img :src=\"signImg\" alt=\"\" v-if=\"signImg\" class=\"sign-img\">\n          <div @click=\"addSign\" class=\"sign-style\">\n            <i class=\"icon-ym icon-ym-signature add-sign\"></i>\n            <span class=\"sign-title\" v-if=\"!signImg\">手写签名</span>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"抄送人员\" v-if=\"properties.isCustomCopy\">\n        <JnpfUserSelect v-model=\"copyIds\" placeholder=\"请选择\" multiple />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">{{$t('common.cancelButton')}}</el-button>\n      <el-button type=\"primary\" @click=\"handleApproval()\" :loading=\"approvalBtnLoading\">\n        {{$t('common.confirmButton')}}\n      </el-button>\n    </span>\n\n  </el-dialog>\n  <!-- 流程节点变更复活对话框 -->\n  <el-dialog :title=\"flowTaskInfo.completion==100?'复活':'变更'\" :close-on-click-modal=\"false\"\n    :visible.sync=\"resurgenceVisible\" class=\"JNPF-dialog JNPF-dialog_center\" lock-scroll\n    append-to-body width='600px'>\n    <el-form label-width=\"80px\" :model=\"resurgenceForm\" :rules=\"resurgenceRules\"\n      ref=\"resurgenceForm\">\n      <el-form-item :label=\"flowTaskInfo.completion==100?'复活节点':'变更节点'\" prop=\"taskNodeId\">\n        <el-select v-model=\"resurgenceForm.taskNodeId\"\n          :placeholder=\"flowTaskInfo.completion==100?'请选择复活节点':'请选择变更节点'\">\n          <el-option v-for=\"item in resurgenceNodeList\" :key=\"item.id\" :label=\"item.nodeName\"\n            :value=\"item.id\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item :label=\"flowTaskInfo.completion==100?'复活意见':'变更意见'\" prop=\"handleOpinion\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-input type=\"textarea\" v-model=\"resurgenceForm.handleOpinion\" placeholder=\"请填写意见\"\n              :rows=\"4\" />\n          </el-col>\n        </el-row>\n      </el-form-item>\n      <el-form-item :label=\"flowTaskInfo.completion==100?'复活附件':'变更附件'\" prop=\"fileList\">\n        <JnpfUploadFile v-model=\"resurgenceForm.fileList\" :limit=\"3\" />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"resurgenceVisible = false\">{{$t('common.cancelButton')}}</el-button>\n      <el-button type=\"primary\" @click=\"handleResurgence()\" :loading=\"resurgenceBtnLoading\">\n        {{$t('common.confirmButton')}}\n      </el-button>\n    </span>\n  </el-dialog>\n  <print-browse :visible.sync=\"printBrowseVisible\" :id=\"printTemplateId\" :formId=\"setting.id\"\n    :fullName=\"setting.fullName\" />\n  <candidate-form :visible.sync=\"candidateVisible\" :candidateList=\"candidateList\"\n    :branchList=\"branchList\" :taskId=\"setting.taskId\" :formData=\"formData\" ref=\"candidateForm\"\n    @submitCandidate=\"submitCandidate\" :isCustomCopy=\"properties.isCustomCopy\" />\n  <error-form :visible.sync=\"errorVisible\" :nodeList=\"errorNodeList\" @submit=\"handleError\" />\n  <actionDialog v-if=\"actionVisible\" ref=\"actionDialog\" :assignNodeList=\"assignNodeList\"\n    @submit=\"actionReceiver\" />\n  <SuspendDialog v-if=\"suspendVisible\" ref=\"suspendDialog\" @submit=\"suspendReceiver\" />\n  <HasFreeApprover :visible.sync=\"hasFreeApproverVisible\" :taskId=\"setting.taskId\"\n    :formData=\"formData\" :properties=\"properties\" @close=\"approverDialog\" />\n  <SignImgDialog v-if=\"signVisible\" ref=\"SignImg\" :lineWidth='3' :userInfo='userInfo'\n    :isDefault='1' @close=\"signDialog\" />\n  <FlowBox v-if=\"flowBoxVisible\" ref=\"FlowBox\" @close=\"flowBoxVisible = false\" />\n  <PrintDialog v-if=\"printDialogVisible\" ref=\"printDialog\" @change=\"printBrowseHandle\">\n  </PrintDialog>\n  <EventLog v-if=\"logVisible\" ref=\"EventLog\" @close=\"logVisible = false\" />\n</div>\n<!-- </transition> -->\n",null]}