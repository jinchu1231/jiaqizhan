{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/components/JNPFEditor/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/components/JNPFEditor/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Editor from '@tinymce/tinymce-vue'\nimport { toolbar, plugins } from './tinymce';\nimport editorImage from './components/EditorImage'\nlet unique = 0\n\nexport default {\n  name: 'JnpfEditor',\n  components: {\n    Editor, editorImage\n  },\n  inheritAttrs: false,\n  props: {\n    value: String,\n    init: Object,\n    height: {\n      type: [String, Number],\n      default: 400\n    },\n    plugins: [String, Array],\n    toolbar: [String, Array],\n    menubar: [String, Array],\n    showImageUpload: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data() {\n    return {\n      pageVisible: false,\n      tinymceId: this.uuid(),\n      dataValue: '',\n      languageTypeList: {\n        'en': 'en',\n        'zh': 'zh_CN',\n        'es': 'es_MX',\n        'ja': 'ja'\n      },\n      showInit: {},\n      showEdit: false,\n      fullscreen: false\n    }\n  },\n  computed: {\n    editor() {\n      return window.tinymce.get(this.tinymceId)\n    },\n    showToolbar() {\n      return this.toolbar != undefined ? this.toolbar : toolbar\n    },\n    showPlugins() {\n      return this.plugins != undefined ? this.plugins : plugins\n    }\n  },\n  watch: {\n    value: {\n      handler(val) {\n        this.dataValue = val || ''\n      },\n      immediate: true,\n      deep: true\n    },\n    dataValue() {\n      this.$emit('input', this.dataValue)\n    },\n    init: {\n      handler() {\n        this.showEdit = false\n        this.uuid()\n        this.initTinymce()\n        this.$nextTick(() => {\n          this.showEdit = true\n        })\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  deactivated() {\n    this.destroyTinymce()\n  },\n  destroyed() {\n    this.destroyTinymce()\n  },\n  methods: {\n    initTinymce() {\n      let _this = this\n      const initDefault = {\n        skin: 'wukong',\n        resize: false,\n        branding: false,\n        language: this.languageTypeList['zh'],\n        menubar: 'file edit insert view format table',\n        body_class: 'panel-body',\n        image_advtab: true,\n        end_container_on_empty_block: true,\n        powerpaste_word_import: 'clean',\n        fontsize_formats: '12px 14px 16px 18px 24px 36px 48px 56px 72px',\n        font_formats: 'Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats;微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif',\n        code_dialog_height: 450,\n        code_dialog_width: 1000,\n        advlist_bullet_styles: 'square',\n        advlist_number_styles: 'default',\n        imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\n        default_link_target: '_blank',\n        link_title: false,\n        object_resizing: true,\n        paste_data_images: true, // 允许粘贴图像\n        quickbars_insert_toolbar: false,\n        nonbreaking_force_tab: true,\n        convert_urls: false,\n        toolbar_mode: 'sliding',\n        toolbar_persist: false,\n        ...this.init,\n        setup(editor) {\n          editor.on('FullscreenStateChanged', (e) => {\n            _this.fullscreen = e.state\n          })\n        },\n      }\n\n      /**\n       * statusbar 隐藏底部状态栏\n       */\n\n      if (this.height != undefined) {\n        initDefault.height = this.height\n      }\n      this.showInit = initDefault\n\n    },\n    uuid() {\n      const time = Date.now()\n      const random = Math.floor(Math.random() * 1000000000)\n\n      unique++\n\n      return 'wukong_' + random + unique + String(time)\n    },\n    successOK(url) {\n      window.tinymce.get(this.tinymceId).insertContent(`<img  src=\"${url}\" >`)\n    },\n    destroyTinymce() {\n      const tinymce = window.tinymce.get(this.tinymceId)\n      if (this.fullscreen) {\n        tinymce.execCommand('mceFullScreen')\n      }\n\n      if (tinymce) {\n        tinymce.destroy()\n      }\n    },\n  }\n}\n",null]}