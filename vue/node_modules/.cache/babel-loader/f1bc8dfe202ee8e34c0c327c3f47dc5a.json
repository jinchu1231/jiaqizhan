{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/extend/document/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/extend/document/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\nrequire(\"core-js/modules/web.dom.iterable\");\nrequire(\"core-js/modules/es6.object.keys\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es6.regexp.replace\");\nrequire(\"core-js/modules/es6.function.name\");\nvar _defineProperty2 = _interopRequireDefault(require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime-corejs2@7.24.5@@babel/runtime-corejs2/helpers/defineProperty.js\"));\nvar _document = require(\"@/api/extend/document\");\nvar _UserBox = _interopRequireDefault(require(\"./UserBox\"));\nvar _FolderTree = _interopRequireDefault(require(\"./FolderTree\"));\nvar _fileUploader = _interopRequireDefault(require(\"./fileUploader\"));\nvar _Preview = _interopRequireDefault(require(\"./Preview\"));\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = exports.default = {\n  name: 'extend-document',\n  components: {\n    userBox: _UserBox.default,\n    folderTree: _FolderTree.default,\n    FileUploader: _fileUploader.default,\n    Preview: _Preview.default\n  },\n  data: function data() {\n    return {\n      userBoxVisible: false,\n      folderTreeVisible: false,\n      detailVisible: false,\n      activeTab: 'allPanel',\n      keyword: '',\n      parentId: '0',\n      listLoading: true,\n      previewVisible: false,\n      list: [],\n      levelList: [{\n        id: '0',\n        fullName: '全部文档'\n      }],\n      activeFile: {\n        fileId: '',\n        name: '',\n        url: '',\n        fileVersionId: ''\n      }\n    };\n  },\n  watch: {\n    activeTab: function activeTab(val) {\n      if (val === 'allPanel') {\n        this.levelList = [{\n          id: \"0\",\n          fullName: '全部文档'\n        }];\n        this.parentId = \"0\";\n      }\n      this.reset();\n    }\n  },\n  created: function created() {\n    this.initData();\n  },\n  methods: {\n    reset: function reset() {\n      this.list = [];\n      this.keyword = '';\n      this.initData();\n    },\n    initData: function initData() {\n      var _this = this;\n      this.listLoading = true;\n      var data = {\n        keyword: this.keyword\n      };\n      if (this.activeTab === 'allPanel') {\n        data = _objectSpread(_objectSpread({}, data), {}, {\n          parentId: this.parentId\n        });\n        (0, _document.AllList)(data).then(function (res) {\n          _this.list = res.data.list;\n          _this.listLoading = false;\n        });\n      }\n      if (this.activeTab === 'shareoutPanel') {\n        (0, _document.ShareOutList)(data).then(function (res) {\n          _this.list = res.data.list;\n          _this.listLoading = false;\n        });\n      }\n      if (this.activeTab === 'sharetomePanel') {\n        (0, _document.ShareTomeList)(data).then(function (res) {\n          _this.list = res.data.list;\n          _this.listLoading = false;\n        });\n      }\n      if (this.activeTab === 'trashPanel') {\n        (0, _document.TrashList)(data).then(function (res) {\n          _this.list = res.data.list;\n          _this.listLoading = false;\n        });\n      }\n    },\n    search: function search() {\n      this.initData();\n    },\n    handleDel: function handleDel(index, id) {\n      var _this2 = this;\n      this.$confirm('您确定要把所选文件放入回收站, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        (0, _document.Delete)(id).then(function (res) {\n          _this2.list.splice(index, 1);\n          _this2.$message({\n            type: 'success',\n            message: res.msg\n          });\n        });\n      }).catch(function () {});\n    },\n    unshare: function unshare(index, id) {\n      var _this3 = this;\n      this.$confirm('您确定要取消共享, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        (0, _document.ShareCancel)(id).then(function (res) {\n          _this3.list.splice(index, 1);\n          _this3.$message({\n            type: 'success',\n            message: res.msg\n          });\n        });\n      }).catch(function () {});\n    },\n    recovery: function recovery(index, id) {\n      var _this4 = this;\n      this.$confirm('您确定要还原选中的文件?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        (0, _document.TrashRecovery)(id).then(function (res) {\n          _this4.list.splice(index, 1);\n          _this4.$message({\n            type: 'success',\n            message: res.msg\n          });\n        });\n      }).catch(function () {});\n    },\n    trashDel: function trashDel(index, id) {\n      var _this5 = this;\n      this.$confirm('文件删除后将无法恢复，您确定要彻底删除所选文件吗?', '提示', {\n        type: 'warning'\n      }).then(function () {\n        (0, _document.TrashDelete)(id).then(function (res) {\n          _this5.list.splice(index, 1);\n          _this5.$message({\n            type: 'success',\n            message: res.msg\n          });\n        });\n      }).catch(function () {});\n    },\n    moveTo: function moveTo(id, parentId) {\n      var _this6 = this;\n      this.folderTreeVisible = true;\n      this.$nextTick(function () {\n        _this6.$refs.folderTree.init(id, parentId);\n      });\n    },\n    shareFolder: function shareFolder(id) {\n      var _this7 = this;\n      this.userBoxVisible = true;\n      this.$nextTick(function () {\n        _this7.$refs.userBox.init(id);\n      });\n    },\n    getFolder: function getFolder(id) {\n      var _this8 = this;\n      (0, _document.DocumentInfo)(id).then(function (res) {\n        _this8.addFolder(res.data);\n      });\n    },\n    // 新建文件夹\n    addFolder: function addFolder(info) {\n      var _this9 = this;\n      var inputValue = \"\";\n      if (info) {\n        inputValue = info.fullName;\n      }\n      var title = info ? info.type ? '重命名文件' : '重命名文件夹' : '新建文件夹';\n      this.$prompt('', title, {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputPlaceholder: '输入名称',\n        inputErrorMessage: '请正确输入文件夹名称',\n        inputValue: inputValue,\n        // inputPattern: /^[\\u4e00-\\u9fa5_a-zA-Z0-9]+$/,\n        closeOnClickModal: false\n      }).then(function (_ref) {\n        var value = _ref.value;\n        var data = {\n          type: info && info.type ? info.type : \"0\",\n          parentId: _this9.parentId,\n          fullName: value\n        };\n        if (info && info.id) {\n          Object.assign(data, {\n            id: info.id\n          });\n          (0, _document.Update)(data).then(function (res) {\n            _this9.$message({\n              type: 'success',\n              message: res.msg\n            });\n            _this9.initData();\n          });\n        } else {\n          (0, _document.Create)(data).then(function (res) {\n            _this9.$message({\n              type: 'success',\n              message: res.msg\n            });\n            _this9.initData();\n          });\n        }\n      }).catch(function () {});\n    },\n    uploadFile: function uploadFile() {\n      this.$refs.fileUploader && this.$refs.fileUploader.openUploader();\n    },\n    fileSuccess: function fileSuccess() {\n      this.reset();\n    },\n    //预览文件\n    handlepreview: function handlepreview(row) {\n      this.activeFile.name = row.fullName;\n      this.activeFile.fileId = row.filePath;\n      this.activeFile.fileVersionId = null;\n      this.activeFile.url = row.uploaderUrl;\n      this.previewVisible = true;\n    },\n    // 下载文件\n    handleDownLoad: function handleDownLoad(id) {\n      var _this10 = this;\n      (0, _document.Download)(id).then(function (res) {\n        _this10.jnpf.downloadFile(res.data.url, res.data.name);\n      });\n    },\n    // 打开文件夹\n    openFolder: function openFolder(item) {\n      this.parentId = item.id;\n      this.levelList.push(item);\n      this.reset();\n    },\n    jump: function jump(item, i) {\n      this.parentId = item.id;\n      this.reset();\n      this.levelList = this.levelList.slice(0, i + 1);\n    },\n    toFileExt: function toFileExt(ext) {\n      if (ext) ext = ext.replace('.', '');\n      if (ext == \"doc\" || ext == \"docx\") {\n        return \"icon-ym-file-word\";\n      }\n      if (ext == \"xls\" || ext == \"xlsx\") {\n        return \"icon-ym-file-excel\";\n      }\n      if (ext == \"ppt\" || ext == \"pptx\") {\n        return \"icon-ym-file-ppt\";\n      }\n      if (ext == \"rar\" || ext == \"zip\") {\n        return \"icon-ym-file-zip\";\n      }\n      if (ext == \"txt\" || ext == \"log\") {\n        return \"icon-ym-file-text\";\n      }\n      if (ext == \"html\" || ext == \"cs\" || ext == \"xml\") {\n        return \"icon-ym-file-code\";\n      }\n      if (ext == \"gif\" || ext == \"jpg\" || ext == \"jpeg\" || ext == \"bmp\" || ext == \"png\") {\n        return \"icon-ym-file-image1\";\n      }\n      if (ext == \"pdf\") {\n        return \"icon-ym-file-pdf\";\n      }\n      if (ext == \"mp3\") {\n        return \"icon-ym-file-audio\";\n      }\n      if (ext == \"mp4\") {\n        return \"icon-ym-file-movie\";\n      }\n      return \"icon-ym-file-blank\";\n    }\n  }\n};",null]}