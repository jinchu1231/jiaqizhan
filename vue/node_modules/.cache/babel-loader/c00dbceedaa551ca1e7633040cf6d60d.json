{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/components/ColumnDesign/condition/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/components/ColumnDesign/condition/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\nrequire(\"core-js/modules/es6.object.keys\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime-corejs2@7.24.5@@babel/runtime-corejs2/helpers/defineProperty.js\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime-corejs2@7.24.5@@babel/runtime-corejs2/helpers/toConsumableArray.js\"));\nrequire(\"core-js/modules/web.dom.iterable\");\nrequire(\"core-js/modules/es7.array.includes\");\nrequire(\"core-js/modules/es6.string.includes\");\nrequire(\"core-js/modules/es6.number.constructor\");\nvar _dictionary = require(\"@/api/systemData/dictionary\");\nvar _dataInterface = require(\"@/api/systemData/dataInterface\");\nvar _comConfig = require(\"@/components/Generator/generator/comConfig\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar logicOptions = [{\n  id: 'and',\n  fullName: 'and'\n}, {\n  id: 'or',\n  fullName: 'or'\n}];\nvar baseSymbolOptions = [{\n  id: 'like',\n  fullName: '包含'\n}, {\n  id: 'notLike',\n  fullName: '不包含'\n}, {\n  id: 'null',\n  fullName: '为空'\n}, {\n  id: 'notNull',\n  fullName: '不为空'\n}];\nvar rangeSymbolOptions = [{\n  id: '>=',\n  fullName: '大于等于'\n}, {\n  id: '>',\n  fullName: '大于'\n}, {\n  id: '==',\n  fullName: '等于'\n}, {\n  id: '<=',\n  fullName: '小于等于'\n}, {\n  id: '<',\n  fullName: '小于'\n}, {\n  id: '<>',\n  fullName: '不等于'\n}, {\n  id: 'between',\n  fullName: '介于'\n}, {\n  id: 'null',\n  fullName: '为空'\n}, {\n  id: 'notNull',\n  fullName: '不为空'\n}];\nvar switchSymbolOptions = [{\n  id: '==',\n  fullName: '等于'\n}, {\n  id: '<>',\n  fullName: '不等于'\n}];\nvar selectSymbolOptions = [].concat(switchSymbolOptions, [{\n  id: 'in',\n  fullName: '包含任意一个'\n}, {\n  id: 'notIn',\n  fullName: '不包含任意一个'\n}, {\n  id: 'null',\n  fullName: '为空'\n}, {\n  id: 'notNull',\n  fullName: '不为空'\n}]);\nvar relationFormSymbolOptions = [].concat(switchSymbolOptions, [{\n  id: 'null',\n  fullName: '为空'\n}, {\n  id: 'notNull',\n  fullName: '不为空'\n}]);\nvar useRangeSymbolList = ['calculate', 'inputNumber', 'rate', 'slider', 'datePicker', 'timePicker', 'createTime', 'modifyTime'];\nvar useSelectSymbolList = ['radio', 'checkbox', 'select', 'treeSelect', 'cascader', 'areaSelect', 'organizeSelect', 'depSelect', 'posSelect', 'userSelect', 'usersSelect', 'roleSelect', 'groupSelect', 'createUser', 'modifyUser', 'currOrganize', 'currPosition', 'popupTableSelect'];\nvar useSwitchSymbolList = ['switch'];\nvar useRelationFormSymbolList = ['relationForm', 'popupSelect'];\nvar _default2 = exports.default = {\n  props: {\n    modelType: {\n      type: [String, Number],\n      default: ''\n    },\n    columnOptions: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    value: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    type: {\n      type: Number,\n      default: 0\n    },\n    matchLogic: {\n      type: String,\n      default: \"and\"\n    }\n  },\n  data: function data() {\n    return {\n      precision: 0,\n      nowJnpfKey: undefined,\n      dialogVisible: false,\n      conditionList: [],\n      matchLog: this.matchLogic,\n      logicOptions: logicOptions,\n      baseSymbolOptions: baseSymbolOptions,\n      rangeSymbolOptions: rangeSymbolOptions,\n      selectSymbolOptions: selectSymbolOptions,\n      switchSymbolOptions: switchSymbolOptions,\n      useRangeSymbolList: useRangeSymbolList,\n      useSelectSymbolList: useSelectSymbolList,\n      useSwitchSymbolList: useSwitchSymbolList,\n      relationFormSymbolOptions: relationFormSymbolOptions,\n      useRelationFormSymbolList: useRelationFormSymbolList\n    };\n  },\n  computed: {\n    usedFormItems: function usedFormItems() {\n      var list = [];\n      var loop = function loop(data, parent) {\n        if (!data) return;\n        if (data.__config__ && ![\"table\"].includes(data.__config__.jnpfKey) && data.__config__.children && Array.isArray(data.__config__.children)) {\n          loop(data.__config__.children, data);\n        }\n        if (Array.isArray(data)) data.forEach(function (d) {\n          return loop(d, parent);\n        });\n        if (\n        //下拉树形,关联表单 关联表单属性 弹窗选择 弹窗选择属性 下拉表格\n        //不支持控件：开关、文件上传、图片上传、颜色选择、评分、滑块、富文本、链接、\n        //按钮、文本、提示、二维码、条形码、用户组件、设计子表。\n        data.__vModel__ && !['relationFormAttr', 'popupAttr', 'uploadFile', 'uploadImg', 'colorPicker', 'editor', 'link', 'button', 'text', 'alert', 'table', 'sign'].includes(data.__config__.jnpfKey)) list.push(data);\n      };\n      loop(this.columnOptions);\n      var formItems = list;\n      this.buildOptions(formItems);\n      return formItems;\n    }\n  },\n  watch: {\n    value: {\n      handler: function handler(val) {\n        if (val) {\n          this.conditionList = val;\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    getSymbolOptions: function getSymbolOptions(jnpfKey) {\n      if (this.useSwitchSymbolList.includes(jnpfKey)) return this.switchSymbolOptions;\n      if (this.useRelationFormSymbolList.includes(jnpfKey)) return this.relationFormSymbolOptions;\n      if (this.useRangeSymbolList.includes(jnpfKey)) return this.rangeSymbolOptions;\n      if (this.useSelectSymbolList.includes(jnpfKey)) return this.selectSymbolOptions;\n      if (['location'].includes(jnpfKey)) return this.baseSymbolOptions;\n      return [].concat(switchSymbolOptions, (0, _toConsumableArray2.default)(this.baseSymbolOptions));\n    },\n    input: function input() {\n      this.$forceUpdate();\n    },\n    buildOptions: function buildOptions(componentList) {\n      componentList.forEach(function (cur) {\n        cur.disabled = false;\n        var config = cur.__config__;\n        if (_comConfig.dyOptionsList.includes(config.jnpfKey)) {\n          if (config.dataType === 'dictionary' && config.dictionaryType) {\n            cur.options = [];\n            (0, _dictionary.getDictionaryDataSelector)(config.dictionaryType).then(function (res) {\n              cur.options = res.data.list;\n            });\n          }\n          if (config.dataType === 'dynamic' && config.propsUrl) {\n            cur.options = [];\n            var query = {\n              paramList: config.templateJson || []\n            };\n            (0, _dataInterface.getDataInterfaceRes)(config.propsUrl, query).then(function (res) {\n              cur.options = Array.isArray(res.data) ? res.data : [];\n            });\n          }\n        }\n      });\n      return componentList;\n    },\n    getData: function getData() {\n      return {\n        matchLogic: JSON.parse(JSON.stringify(this.matchLog)),\n        conditionList: JSON.parse(JSON.stringify(this.conditionList))\n      };\n    },\n    handleClose: function handleClose() {\n      this.dialogVisible = false;\n    },\n    show: function show(data) {\n      this.dialogVisible = true;\n      if (data != null) {\n        this.init(data);\n      }\n    },\n    addGroup: function addGroup() {\n      var item = {\n        logic: \"and\",\n        groups: [{\n          field: '',\n          symbol: '',\n          jnpfKey: '',\n          fieldValueType: 2,\n          fieldValue: undefined,\n          fieldValueJnpfKey: '',\n          cellKey: +new Date()\n        }]\n      };\n      this.conditionList.push(item);\n    },\n    addItem: function addItem(index) {\n      this.conditionList[index].groups.push({\n        field: '',\n        symbol: '',\n        jnpfKey: '',\n        fieldValueType: 2,\n        fieldValue: undefined,\n        fieldValueJnpfKey: '',\n        cellKey: +new Date()\n      });\n    },\n    delGroup: function delGroup(index) {\n      this.conditionList.splice(index, 1);\n    },\n    delItem: function delItem(index, childIndex) {\n      this.conditionList[index].groups.splice(childIndex, 1);\n    },\n    fieldNameChange: function fieldNameChange(val, item, i, childIndex) {\n      item.cellKey = +new Date();\n      var obj = this.usedFormItems.filter(function (o) {\n        return o.id == val;\n      })[0];\n      item.fieldName = obj.__config__.label;\n      item.jnpfKey = obj.__config__.jnpfKey;\n      obj.jnpfKey = obj.__config__.jnpfKey;\n      item = _objectSpread(_objectSpread({}, item), obj);\n      if (item.jnpfKey == 'rate' && item.allowHalf) this.precision = 1;\n      if (item.jnpfKey != this.nowJnpfKey) {\n        item.symbol = undefined;\n      }\n      item.disabled = ['null', 'notNull'].includes(item.symbol);\n      item.multiple = ['in', 'notIn'].includes(item.symbol);\n      // 清空数据\n      item.symbol = undefined;\n      item.fieldValue = undefined;\n      if (item.jnpfKey == 'switch') item.fieldValue = 0;\n      this.$set(this.conditionList[i].groups, childIndex, item);\n      this.nowJnpfKey = item.jnpfKey;\n    },\n    // 比较符号改变事件\n    symbolChange: function symbolChange(val, item, i, childIndex) {\n      item.symbol = val;\n      item.cellKey = +new Date();\n      item.disabled = ['null', 'notNull'].includes(val);\n      item.multiple = [\"in\", \"notIn\"].includes(val);\n      if (item.jnpfKey == 'cascader') {\n        item.props.multiple = false;\n        if ([\"in\", \"notIn\"].includes(val)) item.props.multiple = true;\n      }\n      item.fieldValue = undefined;\n      if (item.jnpfKey == 'switch') item.fieldValue = 0;\n      if ([\"in\", \"notIn\"].includes(val)) item.fieldValue = [];\n      this.$set(this.conditionList[i].groups, childIndex, item);\n    }\n  }\n};",null]}