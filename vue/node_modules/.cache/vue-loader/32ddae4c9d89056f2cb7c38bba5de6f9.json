{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/workFlow/workFlowForm/leaveApply/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/workFlow/workFlowForm/leaveApply/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport comMixin from '../mixin';\n\nexport default {\n  mixins: [comMixin],\n  name: 'LeaveApply',\n  data() {\n    var checkStartTime = (rule, value, callback) => {\n      if (!this.dataForm.leaveEndTime) {\n        callback()\n      } else {\n        if (this.dataForm.leaveEndTime < value) {\n          callback(new Error('起始日期应该小于结束日期'));\n        } else {\n          this.$refs.dataForm.validateField('endTime');\n          callback()\n        }\n      }\n    }\n    var checkEndTime = (rule, value, callback) => {\n      if (!this.dataForm.leaveStartTime) {\n        callback()\n      } else {\n        if (this.dataForm.leaveStartTime > value) {\n          callback(new Error('结束日期应该大于起始日期'));\n        } else {\n          callback()\n        }\n      }\n    }\n    return {\n      billEnCode: 'WF_LeaveApplyNo',\n      dataForm: {\n        flowId: '',\n        id: '',\n        billNo: '',\n        flowTitle: '',\n        flowUrgent: 1,\n        applyUser: '',\n        applyDate: '',\n        applyDept: '',\n        applyPost: '',\n        leaveType: '事假',\n        leaveReason: '',\n        leaveStartTime: '',\n        leaveEndTime: '',\n        leaveDayCount: '',\n        leaveHour: '',\n        fileJson: ''\n      },\n      dataRule: {\n        flowTitle: [\n          { required: true, message: '流程标题不能为空', trigger: 'blur' },\n        ],\n        leaveType: [\n          { required: true, message: '请假类别不能为空', trigger: 'change' },\n        ],\n        leaveReason: [\n          { required: true, message: '请假原因不能为空', trigger: 'blur' },\n        ],\n        leaveStartTime: [\n          { required: true, message: '起始时间不能为空', trigger: 'change' },\n          { validator: checkStartTime, trigger: 'change' }\n        ],\n        leaveEndTime: [\n          { required: true, message: '结束时间不能为空', trigger: 'change' },\n          { validator: checkEndTime, trigger: 'change' }\n        ],\n        leaveDayCount: [\n          { required: true, message: '请假天数不能为空', trigger: 'blur' },\n          { validator: this.formValidate('allDate', '请假时间必须是整数和0.5的倍数'), trigger: 'blur' },\n        ],\n        leaveHour: [\n          { required: true, message: '请假小时不能为空', trigger: 'blur' },\n          { validator: this.formValidate('allDate', '请假小时必须是整数和0.5的倍数'), trigger: 'blur' },\n        ],\n      },\n      leaveTypeOptions: ['事假', '病假', '婚假', '产假', '丧假', '年假', '调休', '其他']\n    }\n  },\n  methods: {\n    selfInit(data) {\n      this.dataForm.applyDate = new Date().getTime()\n      this.dataForm.flowTitle = this.userInfo.userName + \"的请假申请\"\n      this.dataForm.applyUser = this.userInfo.userName + '/' + this.userInfo.userAccount\n      this.dataForm.applyDept = this.userInfo.organizeName\n      if (this.userInfo.positionIds && this.userInfo.positionIds.length) {\n        let list = this.userInfo.positionIds.map(o => o.name)\n        this.dataForm.applyPost = list.join(',')\n      }\n    }\n  }\n}\n",null]}