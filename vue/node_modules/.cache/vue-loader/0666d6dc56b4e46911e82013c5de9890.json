{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/layout/components/userList/Im.vue?vue&type=template&id=6cc4390d&scoped=true","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/layout/components/userList/Im.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"im-container\" v-if=\"visible\">\n  <div class=\"header\">\n    <el-avatar :size=\"30\" :src=\"define.comUrl+info.headIcon\" />\n    <span class=\"name\">{{info.realName}}/{{info.account}}</span>\n    <el-link icon=\"el-icon-close\" :underline=\"false\" @click=\"visible=false\"></el-link>\n  </div>\n  <div class=\"main\">\n    <div class=\"chatBox\">\n      <div class=\"chatList\" ref=\"chatList\">\n        <div class=\"chatList-item\" v-for=\"(item,index) in list\" :key=\"index\"\n          :class=\"{'chatList-item--mine': item.userId==userInfo.userId}\">\n          <div class=\"chatList-user\" v-if=\"item.userId==userInfo.userId\">\n            <el-avatar :size=\"40\" :src=\"define.comUrl+userInfo.headIcon\" />\n            <cite><i>{{item.dateTime}}</i>我</cite>\n          </div>\n          <div class=\"chatList-user\" v-else>\n            <el-avatar :size=\"40\" :src=\"define.comUrl+info.headIcon\" />\n            <cite>{{info.realName}}<i>{{item.dateTime}}</i></cite>\n          </div>\n          <div class=\"chatList-text\">\n            <div class=\"chatList-arrow\"></div>\n            <p v-if=\"item.messageType=='text'\" v-html=\"item.message\" class=\"chatList__msg--text\">\n            </p>\n            <el-image :src=\"define.comUrl+item.message.path\" class=\"chatList__msg--img\"\n              v-if=\"item.messageType=='image' && item.message.path\"\n              :preview-src-list=\"[define.comUrl+item.message.path]\" :z-index=\"10000\">\n            </el-image>\n            <audio class=\"chatList__msg--audio\" controls :src=\"define.comUrl+item.message.path\"\n              v-if=\"item.messageType=='voice' && item.message.path\"\n              @click=\"handleEvent('voice',define.comUrl+item.message.path)\"></audio>\n            <video :src=\"item.message\" controls class=\"chatList__msg--video\"\n              v-if=\"item.messageType=='video'\" @click=\"handleEvent('video',item.message)\"></video>\n          </div>\n        </div>\n      </div>\n      <div class=\"toolBox\">\n        <div class=\"toolBox-left\">\n          <el-popover placement=\"top-start\" trigger=\"click\" ref=\"popover\" v-model=\"popoverVisible\"\n            popper-class=\"emjio-popper\">\n            <div class=\"emjioBox\">\n              <ul class=\"emjio\">\n                <li v-for=\"(item,i) in this.emojiList\" :key=\"i\" @click=\"selectEmit(item)\">\n                  <img :src=\"item.url | urlFilter()\" />\n                </li>\n              </ul>\n            </div>\n            <el-link icon=\"ym-custom ym-custom-emoticon-neutral\" :underline=\"false\" title=\"发送表情\"\n              slot=\"reference\">\n            </el-link>\n          </el-popover>\n          <el-upload :show-file-list=\"false\" :action=\"define.comUploadUrl+'/IM'\" :limit=\"1\"\n            class=\"uploadImg-btn\" :headers=\"{ Authorization: $store.getters.token }\"\n            :on-success=\"handleSuccess\" :before-upload=\"beforeUpload\" ref=\"upload\"\n            accept=\"image/*\">\n            <el-link icon=\"ym-custom ym-custom-image\" :underline=\"false\" title=\"发送图片\">\n            </el-link>\n          </el-upload>\n        </div>\n        <div class=\"toolBox-right\">\n          <el-link icon=\"icon-ym icon-ym-generator-time\" :underline=\"false\" @click=\"openHistory\">\n            聊天记录\n          </el-link>\n        </div>\n      </div>\n      <div class=\"writeBox\">\n        <el-input type=\"textarea\" :rows=\"3\" placeholder=\"点击这里，直接输入消息咨询\"\n          v-model.trim=\"messageContent\" @keyup.enter.native=\"sendMessage\" />\n        <div class=\"btns\">\n          <el-button type=\"primary\" @click=\"sendMessage()\">发 送</el-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"historyBox\" v-if=\"showHistory\">\n      <el-input v-model=\"keyword\" placeholder=\"搜索：请输入关键词\" class=\"JNPF-common-head-input\" clearable\n        @change=\"searchHistory\">\n        <i slot=\"suffix\" class=\"el-input__icon el-icon-search\" @click=\"searchHistory()\" />\n      </el-input>\n      <div class=\"historyList-box\" ref=\"historyListBox\">\n        <div class=\"chatList historyList\">\n          <template v-if=\"historyList.length\">\n            <div class=\"chatList-item\" v-for=\"(item,index) in historyList\" :key=\"index\">\n              <div class=\"chatList-user\" v-if=\"item.userId==userInfo.userId\">\n                <el-avatar :size=\"40\" :src=\"define.comUrl+userInfo.headIcon\" />\n                <cite>我<i>{{item.dateTime}}</i></cite>\n              </div>\n              <div class=\"chatList-user\" v-else>\n                <el-avatar :size=\"40\" :src=\"define.comUrl+info.headIcon\" />\n                <cite>{{info.realName}}<i>{{item.dateTime}}</i></cite>\n              </div>\n              <div class=\"chatList-text\">\n                <div class=\"chatList-arrow\"></div>\n                <span v-if=\"item.messageType=='text'\" v-html=\"item.message\"></span>\n                <el-image :src=\"define.comUrl+item.message.path\" class=\"chatList__msg--img\"\n                  v-if=\"item.messageType=='image' && item.message.path\"\n                  :preview-src-list=\"[define.comUrl+item.message.path]\" :z-index=\"10000\">\n                </el-image>\n                <audio class=\"chatList__msg--audio\" controls\n                  :src=\"define.comUrl+item.message.path\"\n                  v-if=\"item.messageType=='voice' && item.message.path\"\n                  @click=\"handleEvent('voice',define.comUrl+item.message.path)\"></audio>\n                <video :src=\"item.message\" controls class=\"chatList__msg--video\"\n                  v-if=\"item.messageType=='video'\"\n                  @click=\"handleEvent('video',item.message)\"></video>\n              </div>\n            </div>\n          </template>\n          <template v-else>\n            <el-empty description=\"暂无数据\" :image-size=\"120\"></el-empty>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n  <el-dialog :visible.sync=\"show\" width=\"40%\" :before-close=\"handleClose\"\n    class=\"JNPF-dialog JNPF-dialog_center\" lock-scroll style=\"z-index:3000\">\n    <video :src=\"videoSrc\" v-if=\"videoSrc\" style=\"width:100%;object-fit: cover;\"\n      controls=\"controls\"></video>\n    <audio :src=\"audioSrc\" v-if=\"audioSrc\" style=\"width:100%;object-fit: cover;\"\n      controls=\"controls\"></audio>\n  </el-dialog>\n</div>\n",null]}