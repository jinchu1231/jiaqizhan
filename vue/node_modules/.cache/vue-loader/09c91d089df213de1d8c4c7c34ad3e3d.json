{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/basic/profile/components/JustAuth.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/basic/profile/components/JustAuth.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getSocialsUserList, binding, deleteSocials } from '@/api/permission/socialsUser'\nexport default {\n  data() {\n    return {\n      socialsList: [],\n      dialogVisible: false,\n      dialogSrt: '',\n      listenerLoad: false,\n    }\n  },\n  created() {\n    this.init()\n    this.bindListener()\n  },\n  beforeDestroy() {\n    window.removeEventListener('message', () => { })\n  },\n  methods: {\n    init() {\n      this.loading = true\n      getSocialsUserList().then(res => {\n        this.socialsList = res.data;\n        this.loading = false\n      })\n    },\n    binding(data) {\n      binding(data).then(res => {\n        if (this.winURL && !this.winURL.closed) {\n          this.winURL.location.replace(res.msg)\n          this.winURL.focus()\n          return\n        }\n        var iWidth = 750; //弹出窗口的宽度;\n        var iHeight = 500;//弹出窗口的高度;\n        var iLeft = (window.screen.width - iWidth) / 2;\n        var iTop = (window.screen.height - iHeight) / 2;//获得窗口的垂直位置;\n        this.winURL = window.open(res.msg, '_blank', 'height=' + iHeight + ',innerHeight=' + iHeight + ',width=' + iWidth + ',innerWidth=' + iWidth + ',top=' + iTop + ',left=' + iLeft + ',toolbar=no,menubar=no,scrollbars=auto,resizeable=no,location=no,status=no')\n      })\n    },\n    bindListener() {\n      if (!this.listenerLoad) {\n        window.addEventListener('message', (e) => {\n          var res = typeof e.data === 'string' ? JSON.parse(e.data) : e.data;\n          if (res.code == \"200\") {\n            this.$message({\n              message: res.message,\n              type: 'success',\n              duration: 1000,\n              onClose: () => {\n                this.init()\n              }\n            })\n          }\n          if (res.code == \"201\") {\n            this.$message({\n              message: res.message,\n              type: 'error',\n              duration: 3000,\n              onClose: () => {\n                this.init()\n              }\n            })\n          }\n        })\n      }\n      this.listenerLoad = true\n    },\n    deleteSocials(userId, id) {\n      this.$confirm('确定要解除该账号绑定?', '提示', {\n        type: 'warning'\n      }).then(() => {\n        deleteSocials(userId, id).then(res => {\n          this.$message({\n            message: res.msg,\n            type: 'success',\n            duration: 1000,\n            onClose: () => {\n              this.init()\n            }\n          })\n        })\n        this.init()\n      }).catch(() => { });\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n        .then(_ => {\n          done();\n        })\n        .catch(_ => { });\n    },\n    iframeLoad() {\n      window.addEventListener(\"message\", this.handleMessage);\n    },\n    handleMessage(e) {\n      //e为传过来的信息\n      console.log(e)\n    }\n  }\n}\n\n",null]}