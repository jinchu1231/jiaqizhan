{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/basic/dynamicModel/list/Search.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/basic/dynamicModel/list/Search.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es7.array.includes\");\nrequire(\"core-js/modules/es6.string.includes\");\nrequire(\"core-js/modules/web.dom.iterable\");\nrequire(\"core-js/modules/es6.object.keys\");\nvar _utils = require(\"@/utils\");\nvar _comConfig = require(\"@/components/Generator/generator/comConfig\");\nvar _dictionary = require(\"@/api/systemData/dictionary\");\nvar _dataInterface = require(\"@/api/systemData/dataInterface\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = exports.default = {\n  props: ['list', 'initDataJson'],\n  data: function data() {\n    return {\n      showAll: false,\n      searchList: [],\n      useInputList: _comConfig.useInputList,\n      useDateList: _comConfig.useDateList,\n      useSelectList: _comConfig.useSelectList,\n      defSearchList: [],\n      key: +new Date()\n    };\n  },\n  watch: {\n    list: {\n      handler: function handler(val) {\n        this.searchList = (0, _utils.deepClone)(val);\n        this.defSearchList = (0, _utils.deepClone)(val);\n        this.buildOptions(this.searchList);\n      },\n      deep: true,\n      immediate: true\n    },\n    initDataJson: {\n      handler: function handler(val) {\n        if (val != '') {\n          var initData = JSON.parse(val);\n          if (Object.keys(initData).length > 0) {\n            for (var key in initData) {\n              for (var i = 0; i < this.searchList.length; i++) {\n                var e = this.searchList[i];\n                //if ((Array.isArray(e.value) && e.value.length) || e.value || e.value === 0 || e.value === false) e.defaultValue = e.value;\n                if (e.id === key) {\n                  if (e.searchMultiple) {\n                    if (e.jnpfKey == \"organizeSelect\") {\n                      e.value = Array.isArray(initData[key]) && Array.isArray(initData[key][0]) ? initData[key] : [initData[key]];\n                    } else {\n                      e.value = Array.isArray(initData[key]) ? initData[key] : [initData[key]];\n                    }\n                  } else {\n                    e.value = initData[key];\n                  }\n                  break;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    buildOptions: function buildOptions(componentList) {\n      componentList.forEach(function (cur) {\n        var config = cur.__config__;\n        if (_comConfig.dyOptionsList.indexOf(config.jnpfKey) > -1) {\n          if (config.dataType === 'dictionary' && config.dictionaryType) {\n            cur.options = [];\n            (0, _dictionary.getDictionaryDataSelector)(config.dictionaryType).then(function (res) {\n              cur.options = res.data.list;\n            });\n          }\n          if (config.dataType === 'dynamic' && config.propsUrl) {\n            cur.options = [];\n            var query = {\n              paramList: config.templateJson || []\n            };\n            (0, _dataInterface.getDataInterfaceRes)(config.propsUrl, query).then(function (res) {\n              cur.options = Array.isArray(res.data) ? res.data : [];\n            });\n          }\n        }\n      });\n    },\n    search: function search() {\n      var obj = {};\n      for (var i = 0; i < this.searchList.length; i++) {\n        var e = this.searchList[i];\n        if (e.value) {\n          if (Array.isArray(e.value)) {\n            if (e.value.length) obj[e.prop] = e.value;\n          } else {\n            obj[e.prop] = e.value;\n          }\n        }\n      }\n      var queryJson = JSON.stringify(obj) === \"{}\" ? '' : JSON.stringify(obj);\n      this.$emit('search', queryJson);\n    },\n    reset: function reset() {\n      this.treeReset();\n      this.$emit('reset');\n    },\n    treeReset: function treeReset() {\n      for (var i = 0; i < this.defSearchList.length; i++) {\n        if (this.searchList[i].value || this.searchList[i].value == undefined) {\n          this.$set(this.searchList[i], 'value', this.defSearchList[i].value);\n          if (['timePicker', 'timeRange'].includes(this.searchList[i].__config__.jnpfKey)) {\n            this.$set(this.searchList[i], 'value', null);\n          } else if (this.useInputList.includes(this.searchList[i].__config__.jnpfKey)) {\n            this.$set(this.searchList[i], 'value', '');\n          }\n        }\n      }\n      this.key = +new Date();\n    }\n  }\n};",null]}