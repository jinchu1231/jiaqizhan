{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/basic/profile/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/basic/profile/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es6.function.name\");\nrequire(\"core-js/modules/es6.regexp.constructor\");\nrequire(\"core-js/modules/web.dom.iterable\");\nrequire(\"core-js/modules/es6.object.keys\");\nvar _userSetting = require(\"@/api/permission/userSetting\");\nvar _UserInfo = _interopRequireDefault(require(\"./components/UserInfo\"));\nvar _Password = _interopRequireDefault(require(\"./components/Password\"));\nvar _Authorize = _interopRequireDefault(require(\"./components/Authorize\"));\nvar _SysLog = _interopRequireDefault(require(\"./components/SysLog\"));\nvar _JustAuth = _interopRequireDefault(require(\"./components/JustAuth\"));\nvar _TenantInfo = _interopRequireDefault(require(\"./components/TenantInfo\"));\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = exports.default = {\n  name: 'profile',\n  components: {\n    UserInfo: _UserInfo.default,\n    Password: _Password.default,\n    Authorize: _Authorize.default,\n    SysLog: _SysLog.default,\n    JustAuth: _JustAuth.default,\n    TenantInfo: _TenantInfo.default\n  },\n  data: function data() {\n    return {\n      user: {},\n      treeData: [],\n      activeTab: '',\n      organizeList: [],\n      positionList: [],\n      activeOrganize: '',\n      activePosition: '',\n      visible: {\n        tenantInfo: false,\n        user: true,\n        password: false,\n        theme: false,\n        authorize: false,\n        sysLog: false,\n        justAuth: false\n      },\n      props: {\n        children: 'children',\n        label: 'userName',\n        isLeaf: 'isLeaf'\n      },\n      loading: false,\n      userLoading: false,\n      nodeId: '0',\n      uploadHeaders: {\n        Authorization: this.$store.getters.token\n      },\n      tenantData: {},\n      isTenant: false\n    };\n  },\n  watch: {\n    '$route': 'getInfo',\n    activeTab: function activeTab(val) {\n      for (var _i = 0, _Object$keys = Object.keys(this.visible); _i < _Object$keys.length; _i++) {\n        var key = _Object$keys[_i];\n        this.visible[key] = false;\n      }\n      this.visible[val] = true;\n      if (val === 'subordinate') {\n        this.nodeId = '0';\n        this.getSubordinate();\n        return;\n      }\n      if (val === 'organize') {\n        this.getUserOrganizes();\n        return;\n      }\n      if (val === 'position') {\n        this.getUserPositions();\n        return;\n      }\n    }\n  },\n  created: function created() {\n    this.getInfo();\n  },\n  computed: {\n    useSocials: function useSocials() {\n      return localStorage.getItem('useSocials') && localStorage.getItem('useSocials') != '0';\n    }\n  },\n  methods: {\n    beforeUpload: function beforeUpload(file) {\n      var isAccept = new RegExp('image/*').test(file.type);\n      if (!isAccept) {\n        this.$message.error(\"\\u8BF7\\u4E0A\\u4F20\\u56FE\\u7247\");\n      }\n      return isAccept;\n    },\n    getInfo: function getInfo() {\n      var _this = this;\n      this.userLoading = true;\n      (0, _userSetting.UserSettingInfo)().then(function (res) {\n        _this.user = res.data;\n        _this.activeTab = 'user';\n        _this.userLoading = false;\n        _this.tenantData = _this.user.currentTenantInfo;\n        _this.isTenant = _this.user.isTenant;\n        var flag = _this.$router.history.current.query.flag;\n        if (flag == \"1\") {\n          _this.activeTab = \"justAuth\";\n        }\n      });\n    },\n    getSubordinate: function getSubordinate() {\n      var _this2 = this;\n      this.loading = true;\n      (0, _userSetting.getSubordinate)(this.nodeId).then(function (res) {\n        _this2.treeData = res.data;\n        _this2.loading = false;\n      });\n    },\n    loadNode: function loadNode(node, resolve) {\n      if (node.level === 0) {\n        this.nodeId = '0';\n        return resolve(this.treeData);\n      }\n      this.nodeId = node.data.id;\n      (0, _userSetting.getSubordinate)(this.nodeId).then(function (res) {\n        resolve(res.data);\n      });\n    },\n    handleSuccess: function handleSuccess(res, file) {\n      if (res.code == 200) {\n        this.updateAvatar(res.data);\n      } else {\n        this.$message({\n          message: '上传失败',\n          type: 'error',\n          duration: 1000\n        });\n      }\n    },\n    updateAvatar: function updateAvatar(data) {\n      var _this3 = this;\n      (0, _userSetting.UpdateAvatar)(data.name).then(function (res) {\n        _this3.user.avatar = data.url;\n        _this3.$store.commit('user/SET_USERINFO_HEADICON', data.url);\n        _this3.$message({\n          message: res.msg,\n          type: 'success',\n          duration: 1000\n        });\n      });\n    },\n    getUserOrganizes: function getUserOrganizes() {\n      var _this4 = this;\n      (0, _userSetting.getUserOrganizes)().then(function (res) {\n        _this4.organizeList = res.data || [];\n        var list = _this4.organizeList.filter(function (o) {\n          return o.isDefault;\n        });\n        if (!list.length) return _this4.activeOrganize = '';\n        var activeItem = list[0];\n        _this4.activeOrganize = activeItem.id;\n      });\n    },\n    getUserPositions: function getUserPositions() {\n      var _this5 = this;\n      (0, _userSetting.getUserPositions)().then(function (res) {\n        _this5.positionList = res.data || [];\n        var list = _this5.positionList.filter(function (o) {\n          return o.isDefault;\n        });\n        if (!list.length) return _this5.activePosition = '';\n        var activeItem = list[0];\n        _this5.activePosition = activeItem.id;\n      });\n    },\n    changeMajor: function changeMajor(majorId, majorType) {\n      var _this6 = this;\n      if (this['active' + majorType] === majorId) return;\n      var query = {\n        majorId: majorId,\n        majorType: majorType\n      };\n      (0, _userSetting.setMajor)(query).then(function (res) {\n        _this6['active' + majorType] = majorId;\n        _this6.$message({\n          message: res.msg,\n          type: 'success',\n          duration: 1500,\n          onClose: function onClose() {\n            location.reload();\n          }\n        });\n      });\n    }\n  }\n};",null]}