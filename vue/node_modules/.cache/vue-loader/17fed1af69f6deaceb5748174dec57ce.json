{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/systemData/dataInterface/Form.vue?vue&type=template&id=c5b2ce20&scoped=true","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/systemData/dataInterface/Form.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"JNPF-preview-main flow-form-main\">\n  <div class=\"JNPF-common-page-header\">\n    <el-page-header @back=\"goBack\" content=\"\" />\n    <el-steps :active=\"active\" finish-status=\"success\" simple class=\"steps\" :key=\"key\">\n      <el-step v-for=\"item in stepList\" :key=\"item\" :title=\"item\"></el-step>\n    </el-steps>\n    <div class=\"options\">\n      <el-button :disabled=\"active <= 0\" @click=\"handlePrev\">{{$t('common.prev')}}</el-button>\n      <el-button :disabled=\"active >= stepList.length-1\"\n        @click=\"handleNext\">{{$t('common.next')}}</el-button>\n      <el-button type=\"primary\" :loading=\"btnLoading\" :disabled=\"active < stepList.length-1\"\n        @click=\"handleSubmit()\">{{$t('common.confirmButton')}}</el-button>\n      <el-button @click=\"goBack\">{{$t('common.cancelButton')}}</el-button>\n    </div>\n  </div>\n  <!-- 基本信息 -->\n  <el-form ref=\"dataForm\" :model=\"dataForm\" :rules=\"dataRule\" v-loading=\"formLoading\"\n    label-width=\"100px\" v-if=\"active === 0\" :key=\"key\">\n    <el-row>\n      <el-col :span=\"14\" :offset=\"5\" class=\"baseInfo mt-20\">\n        <el-form-item label=\"名称\" prop=\"fullName\">\n          <el-input v-model=\"dataForm.fullName\" placeholder=\"输入名称\" maxlength=\"50\" />\n        </el-form-item>\n        <el-form-item label=\"编码\" prop=\"enCode\">\n          <el-input v-model=\"dataForm.enCode\" placeholder=\"输入编码\" maxlength=\"50\" />\n        </el-form-item>\n        <el-form-item label=\"分类\" prop=\"category\">\n          <JnpfTreeSelect v-model=\"dataForm.category\" :options=\"selectData\" placeholder=\"选择分类\"\n            clearable />\n        </el-form-item>\n        <el-form-item label=\"类型\" prop=\"type\">\n          <el-radio-group v-model=\"dataForm.type\" @input=\"onDataTypeChange\">\n            <el-radio :label=\"2\">静态数据</el-radio>\n            <el-radio :label=\"1\">SQL操作</el-radio>\n            <el-radio :label=\"3\">API操作</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"动作\" prop=\"action\" v-if=\"dataForm.type===1\">\n          <el-radio-group v-model=\"dataForm.action\" @change=\"onMethodChange($event,'sql')\">\n            <el-radio :label=\"3\">查询</el-radio>\n            <el-radio :label=\"1\">增加</el-radio>\n            <el-radio :label=\"2\">修改</el-radio>\n            <el-radio :label=\"4\">删除</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"排序\" prop=\"sortCode\">\n          <el-input-number :min=\"0\" :max=\"999999\" v-model=\"dataForm.sortCode\"\n            controls-position=\"right\" />\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"enabledMark\">\n          <el-switch v-model=\"dataForm.enabledMark\" :active-value=\"1\" :inactive-value=\"0\" />\n        </el-form-item>\n        <el-form-item label=\"分页\"\n          v-if=\"dataForm.type != 2 && (dataForm.type != 2 && dataForm.action == 3)\">\n          <el-switch v-model=\"dataForm.hasPage\" :active-value=\"1\" :inactive-value=\"0\"\n            :disabled=\"dataForm.isPostPosition ==1 || hasPageDisabled\"\n            @change=\"onHasPageChange\" />\n          <span class=\"page-explain\" @click=\"handleShowPageExplain\">分页使用说明</span>\n        </el-form-item>\n        <el-form-item prop=\"isPostPosition\">\n          <span slot=\"label\">鉴权\n            <el-tooltip content=\"开启后作为鉴权接口\" placement=\"top\">\n              <a class=\"el-icon-question tooltip-question\"></a>\n            </el-tooltip>\n          </span>\n          <el-switch v-model=\"dataForm.isPostPosition\" :active-value=\"1\" :inactive-value=\"0\"\n            :disabled=\"!!dataForm.id||dataForm.hasPage==1\" @change=\"onIsPostPositionChange\" />\n        </el-form-item>\n        <el-form-item label=\"说明\" prop=\"description\">\n          <el-input v-model=\"dataForm.description\" type=\"textarea\" :rows=\"3\" />\n        </el-form-item>\n      </el-col>\n    </el-row>\n  </el-form>\n  <!-- sql语句 -->\n  <div class=\"config\" v-if=\"getShowSqlBox()\">\n    <div class=\"tableData\">\n      <el-select v-model=\"dataConfigJson.sqlData.dbLinkId\" placeholder=\"选择数据库\" filterable\n        @change=\"handleSelectTable\" class=\"tableDataSelect\">\n        <el-option-group v-for=\"group in dbOptions\" :key=\"group.fullName\" :label=\"group.fullName\">\n          <el-option v-for=\"item in group.children\" :key=\"item.id\" :label=\"item.fullName\"\n            :value=\"item.id\">\n          </el-option>\n        </el-option-group>\n      </el-select>\n      <div class=\"box\">\n        <div class=\"search-box\">\n          <el-input placeholder=\"请输入关键词查询\" v-model=\"keyword\" @keyup.enter.native=\"search\"\n            clearable class=\"search-input\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"search\"></el-button>\n          </el-input>\n        </div>\n        <div class=\"tree-box\">\n          <el-tree :data=\"treeData\" node-key=\"index\" v-loading=\"treeLoading\" :props=\"defaultProps\"\n            lazy :load=\"loadNode\" @node-click=\"handleNodeClick\" :expand-on-click-node=\"false\">\n            <span class=\"custom-tree-node\" slot-scope=\"{ data }\">\n              <span class=\"text\" v-if=\"data.isLeaf\">\n                {{ data.fieldName?data.field + '(' + data.fieldName + ')':data.field}}\n              </span>\n              <span class=\"text\" v-else>\n                <i\n                  :class=\"data.type == 1 ? 'icon-ym icon-ym-view' : 'icon-ym icon-ym-generator-tableGrid'\" />\n                {{ data.tableName?data.table + '(' + data.tableName + ')':data.table}}\n              </span>\n            </span>\n          </el-tree>\n        </div>\n      </div>\n    </div>\n    <div class=\"detail\">\n      <div class=\"middle-pane\">\n        <div class=\"right-pane-list\">\n          <div class=\"cap\">\n            <span slot=\"label\">SQL语句\n              <el-tooltip content=\"支持SQL语句&存储过程语句\" placement=\"top\">\n                <a class=\"el-icon-question tooltip-question\"></a>\n              </el-tooltip>\n            </span>\n            <div class=\"cap_sys\">\n              <el-dropdown>\n                <span class=\"el-dropdown-link\" title=\"111\">\n                  系统变量<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                </span>\n                <el-dropdown-menu slot=\"dropdown\">\n                  <el-dropdown-item disabled>当前系统变量仅支持内部接口引用</el-dropdown-item>\n                  <el-dropdown-item divided></el-dropdown-item>\n                  <el-dropdown-item v-for=\"(item,index) in sysVariableList\" :key=\"index\">\n                    <div @click=\"handleSysNodeClick(item.value)\">\n                      <span>{{ item.value }}</span>\n                      <span class=\"tips\">{{ item.tips }}</span>\n                    </div>\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </el-dropdown>\n            </div>\n          </div>\n          <div class=\"list\">\n            <div class=\"sql-box\" v-if=\"active===1\">\n              <SQLEditor v-model=\"dataConfigJson.sqlData.sql\" :options=\"sqlOptions\"\n                ref=\"SQLEditorRef\" />\n            </div>\n            <div class=\"sql-box\" v-if=\"dataForm.hasPage && active===2 \">\n              <SQLEditor v-model=\"dataCountJson.sqlData.sql\" :options=\"sqlOptions\"\n                ref=\"dataCountJson\" />\n            </div>\n            <div class=\"sql-box\" v-if=\"dataForm.hasPage && active===3\">\n              <SQLEditor v-model=\"dataEchoJson.sqlData.sql\" :options=\"sqlOptions\"\n                ref=\"dataEchoJson\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <template v-if=\"dataForm.isPostPosition != 1\">\n      <div class=\"right-pane\">\n        <div class=\"right-pane-list\">\n          <div class=\"cap\">\n            <span>接口参数\n              <el-tooltip content=\"接收方式:Body/json\" placement=\"top\">\n                <a class=\"el-icon-question tooltip-question\"></a>\n              </el-tooltip>\n            </span>\n          </div>\n          <RightTable :data=\"parameterJson\" ref=\"RightTable\" tableType=\"1\"\n            @addOrUpdateHandle=\"addOrUpdateHandle($event,'1')\"\n            @removeParameter=\"removeParameter($event,'1')\" @handleItemClick=\"handleItemClick\" />\n        </div>\n        <div class=\"right-pane-list\">\n          <div class=\"cap\">\n            <span>字段列表\n              <el-tooltip content=\"设置接口返回字段\" placement=\"top\">\n                <a class=\"el-icon-question tooltip-question\"></a>\n              </el-tooltip>\n            </span>\n          </div>\n          <RightTable :data=\"fieldJson\" ref=\"RightTable\" tableType=\"2\"\n            @addOrUpdateHandle=\"addOrUpdateHandle($event,'2')\"\n            @removeParameter=\"removeParameter($event,'2')\" />\n        </div>\n      </div>\n    </template>\n  </div>\n  <!-- 静态数据数据处理 -->\n  <div class=\"config\" v-if=\"active === 1 && dataForm.type === 2\">\n    <div class=\"detail\">\n      <div class=\"middle-pane\">\n        <div class=\"right-pane-list\">\n          <div class=\"list\">\n            <el-form ref=\"dataForm\" :model=\"dataConfigJson\" :rules=\"dataRule\" label-width=\"100px\">\n              <el-form-item label-width=\"0\" prop=\"staticData\">\n                <div class=\"sql-box\">\n                  <JSONEditor v-model=\"dataConfigJson.staticData\" :options=\"jsonOptions\"\n                    ref=\"JSONEditorRef\" />\n                </div>\n              </el-form-item>\n            </el-form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"right-pane\">\n      <div class=\"right-pane-list\">\n        <div class=\"cap\">\n          <span>字段列表\n            <el-tooltip content=\"设置接口返回字段\" placement=\"top\">\n              <a class=\"el-icon-question tooltip-question\"></a>\n            </el-tooltip>\n          </span>\n        </div>\n        <RightTable :data=\"fieldJson\" ref=\"RightTable\" tableType=\"2\"\n          @addOrUpdateHandle=\"addOrUpdateHandle($event,'2')\"\n          @removeParameter=\"removeParameter($event,'2')\" />\n      </div>\n    </div>\n  </div>\n  <!-- api操作 -->\n  <div class=\"config\" v-if=\"getShowApiBox()\">\n    <div class=\"detail api_detail\">\n      <div class=\"middle-pane\">\n        <div class=\"right-pane-list\">\n          <div class=\"requestMethod\">\n            <el-form ref=\"dataForm\" :model=\"apiData\" :rules=\"dataRule\">\n              <el-form-item prop=\"url\" label=\"\">\n                <el-input placeholder=\"请输入接口地址\" v-model=\"apiData.url\">\n                  <el-select v-model=\"apiData.method\" slot=\"prepend\" placeholder=\"请选择\">\n                    <el-option label=\"GET\" :value=\"1\"></el-option>\n                    <el-option label=\"POST\" :value=\"2\"></el-option>\n                  </el-select>\n                </el-input>\n              </el-form-item>\n            </el-form>\n          </div>\n          <p class=\"textBlock\">请求参数</p>\n          <div class=\"tabsBlock\">\n            <el-tabs v-model=\"activeKey\" @tab-click=\"tabsHandleClick\">\n              <el-tab-pane label=\"Header\" name=\"0\"></el-tab-pane>\n              <el-tab-pane label=\"Query\" name=\"1\"></el-tab-pane>\n              <el-tab-pane label=\"Body\" name=\"2\"></el-tab-pane>\n            </el-tabs>\n          </div>\n          <div class=\"radio-group-block\" v-if=\"activeKey == 2\">\n            <el-radio-group v-model=\"apiData.bodyType\" @change=\"onBtnTypeChange\" :key=\"key2\">\n              <el-radio :label=\"0\">none</el-radio>\n              <el-radio :label=\"1\">form-data</el-radio>\n              <el-radio :label=\"2\">x-www-form-urlencoded</el-radio>\n              <el-radio :label=\"3\">json</el-radio>\n              <el-radio :label=\"4\">xml</el-radio>\n            </el-radio-group>\n          </div>\n          <template v-if=\"getShowTableBox()\">\n            <CommonTable v-if=\"getShowTableBox()\" :data=\"getList\" ref=\"CommonTable\"\n              @addHandle=\"addHandle\" type=\"1\" :sourceData=\"sourceData\"\n              :isPostPosition=\"dataForm.isPostPosition\" :sourceOptions=\"sourceOptions\"\n              :parameterJson=\"parameterJson\" @removeCommonTable=\"removeCommonTable\"\n              :pagingParameters=\"pagingParameters\" style=\"width: 100%;\" />\n          </template>\n          <p v-show=\"activeKey == 2 && apiData.bodyType == 0\" class=\"body_txt\">\n            该请求没有Body主体</p>\n          <div class=\"json-block\"\n            v-if=\"activeKey == 2 && (apiData.bodyType == 3 || apiData.bodyType == 4)\">\n            <div class=\"json-block-inner\">\n              <div class=\"inner-hd\" v-if=\"!dataForm.isPostPosition\">\n                <p>{{ jsonTxt }}</p>\n                <el-popover placement=\"bottom\" width=\"260\" trigger=\"hover\">\n                  <span slot=\"reference\" class=\"el-dropdown-link cursor_pointer\">\n                    插入参数<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                  </span>\n                  <div>\n                    <el-input placeholder=\"输入关键字\" v-model=\"filterText\"\n                      suffix-icon=\"el-icon-search\" clearable class=\"input-with-select\"\n                      style=\"margin-bottom: 10px;\">\n                    </el-input>\n                    <div style=\"overflow-y: scroll;max-height: 300px;\">\n                      <el-tree :data=\"getTreeData\" :props=\"props\" :expand-on-click-node=\"true\"\n                        :default-expand-all=\"true\" :filter-node-method=\"filterNode\"\n                        @node-click=\"bodyTreeNodeClick\" ref=\"bodyTree\">\n                        <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n                          <i :class=\"data.icon\"></i>\n                          <span class=\"text\">{{node.label}}</span>\n                        </span>\n                      </el-tree>\n                    </div>\n                  </div>\n                </el-popover>\n              </div>\n              <JSONEditor v-if=\"apiData.bodyType == 3\" v-model=\"apiData.bodyJson\"\n                :options=\"jsonOptions\" ref=\"JSONEditorRef\" class=\"JSONEditor\" />\n              <JSONEditor v-if=\"apiData.bodyType == 4\" v-model=\"apiData.bodyXml\"\n                :options=\"jsonOptions\" ref=\"JSONEditorRef\" class=\"JSONEditor\" :key=\"key2\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"right-pane\" v-if=\"!dataForm.isPostPosition\">\n      <div class=\"right-pane-list\">\n        <div class=\"cap\">\n          <span>接口参数\n            <el-tooltip content=\"接收方式:Body/json\" placement=\"top\">\n              <a class=\"el-icon-question tooltip-question\"></a>\n            </el-tooltip>\n          </span>\n        </div>\n        <RightTable :data=\"parameterJson\" ref=\"RightTable\" tableType=\"1\"\n          @addOrUpdateHandle=\"addOrUpdateHandle($event,'1')\"\n          @removeParameter=\"removeParameter($event,'1')\" @handleItemClick=\"handleItemClick\" />\n      </div>\n      <div class=\"right-pane-list\">\n        <div class=\"cap\">\n          <span>字段列表\n            <el-tooltip content=\"设置接口返回字段\" placement=\"top\">\n              <a class=\"el-icon-question tooltip-question\"></a>\n            </el-tooltip>\n          </span>\n        </div>\n        <RightTable :data=\"fieldJson\" ref=\"RightTable\" tableType=\"2\"\n          @addOrUpdateHandle=\"addOrUpdateHandle($event,'2')\"\n          @removeParameter=\"removeParameter($event,'2')\" />\n      </div>\n    </div>\n  </div>\n  <!-- api\\sql数据处理 -->\n  <div class=\"jsStaticData\" v-if=\"getShowCodeBox()\">\n    <div class=\"json-box\">\n      <JNPFCodeEditor v-model=\"dataJsJson\" :options=\"jsOptions\" ref=\"CodeEditor\"\n        v-if=\"getIsLastStep()\" />\n      <JNPFCodeEditor v-model=\"dataExceptionJson\" :options=\"jsOptions\" ref=\"CodeEditor\" />\n    </div>\n    <div class=\"jsTips\">\n      <p>1、支持JavaScript的脚本</p>\n      <p>2、小程序不支持在线JS脚本</p>\n    </div>\n  </div>\n  <FieldForm v-show=\"fieldFormVisible\" ref=\"fieldForm\" @addParameter=\"addParameter\" />\n  <page-explain v-if=\"pageExplainVisible\" ref=\"pageExplain\" />\n</div>\n",null]}