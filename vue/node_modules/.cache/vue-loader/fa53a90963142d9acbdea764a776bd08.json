{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/generator/Preview.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/generator/Preview.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { CodePreview } from '@/api/onlineDev/visualDev'\nimport JNPFCodeEditor from '@/components/JNPFEditor/monaco'\nexport default {\n  components: { JNPFCodeEditor },\n  data() {\n    return {\n      loading: false,\n      visible: false,\n      dataForm: {\n        module: 'system',\n        description: '',\n        subClassName: '',\n        className: ''\n      },\n      defaultProps: {\n        children: 'children',\n        label: 'fileName'\n      },\n      treeData: [],\n      options: {\n        language: 'java'\n      },\n      currentName: '',\n      currentId: '',\n      currentContent: ''\n    }\n  },\n  methods: {\n    init(tables, id) {\n      if (!tables || !id) {\n        this.closeDialog()\n        return\n      }\n      let tablesList = JSON.parse(tables)\n      this.visible = true\n      this.loading = true\n      this.$nextTick(() => {\n        let subClassName = []\n        for (let i = 0; i < tablesList.length; i++) {\n          let e = tablesList[i]\n          if (e.typeId == '1') {\n            this.dataForm.className = e.table\n            this.dataForm.description = e.table\n          } else {\n            subClassName.push(e.table)\n          }\n        }\n        this.dataForm.subClassName = subClassName.join()\n        CodePreview(id, this.dataForm).then(res => {\n          this.treeData = res.data.list\n          this.currentName = this.treeData[0].children[0].fileName\n          this.currentId = this.treeData[0].children[0].currentId\n          this.currentContent = this.treeData[0].children[0].fileContent\n          this.$nextTick(() => {\n            this.$refs.treeBox.setCurrentKey(this.currentName);\n            this.$refs.CodeEditor.changeEditor({\n              value: this.currentContent,\n              options: this.options\n            })\n          });\n          this.loading = false\n        }).catch(() => {\n          this.closeDialog()\n          this.loading = false\n        })\n      })\n    },\n    closeDialog() {\n      this.visible = false\n      this.$emit('close')\n    },\n    handleNodeClick(data) {\n      if (this.currentName == data.fileName && this.currentId == data.id) return\n      this.options.language = data.fileType === 'vue' ? 'html' : 'java'\n      this.currentName = data.fileName\n      this.currentId = data.id\n      this.currentContent = data.fileContent\n      this.$refs.CodeEditor.changeEditor({\n        value: this.currentContent,\n        options: this.options\n      })\n    },\n  }\n}\n",null]}