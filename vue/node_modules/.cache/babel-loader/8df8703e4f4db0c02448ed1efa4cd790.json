{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/components/Generator/index/RightPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/components/Generator/index/RightPanel.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\nrequire(\"core-js/modules/es6.object.keys\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"regenerator-runtime/runtime\");\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime-corejs2@7.24.5@@babel/runtime-corejs2/helpers/asyncToGenerator.js\"));\nrequire(\"core-js/modules/es6.regexp.replace\");\nrequire(\"core-js/modules/es6.regexp.constructor\");\nrequire(\"core-js/modules/es6.regexp.split\");\nvar _defineProperty2 = _interopRequireDefault(require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime-corejs2@7.24.5@@babel/runtime-corejs2/helpers/defineProperty.js\"));\nrequire(\"core-js/modules/es7.array.includes\");\nrequire(\"core-js/modules/es6.string.includes\");\nvar _toConsumableArray2 = _interopRequireDefault(require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime-corejs2@7.24.5@@babel/runtime-corejs2/helpers/toConsumableArray.js\"));\nrequire(\"core-js/modules/web.dom.iterable\");\nvar _comConfig = require(\"@/components/Generator/generator/comConfig\");\nvar _config = require(\"@/components/Generator/generator/config\");\nvar _utils = require(\"@/components/Generator/utils\");\nvar _db = require(\"@/components/Generator/utils/db\");\nvar _dictionary = require(\"@/api/systemData/dictionary\");\nvar _dataInterface = require(\"@/api/systemData/dataInterface\");\nvar _dataModel = require(\"@/api/systemData/dataModel\");\nvar _printDev = require(\"@/api/system/printDev\");\nvar _FormScript = _interopRequireDefault(require(\"./FormScript\"));\nvar _FieldDialog = _interopRequireDefault(require(\"./FieldDialog\"));\nvar _RInput = _interopRequireDefault(require(\"./RightComponents/RInput\"));\nvar _RTextarea = _interopRequireDefault(require(\"./RightComponents/RTextarea\"));\nvar _RLink = _interopRequireDefault(require(\"./RightComponents/RLink\"));\nvar _RText = _interopRequireDefault(require(\"./RightComponents/RText\"));\nvar _RAlert = _interopRequireDefault(require(\"./RightComponents/RAlert\"));\nvar _RInputNumber = _interopRequireDefault(require(\"./RightComponents/RInputNumber\"));\nvar _RRadio = _interopRequireDefault(require(\"./RightComponents/RRadio\"));\nvar _RCheckbox = _interopRequireDefault(require(\"./RightComponents/RCheckbox\"));\nvar _RSelect = _interopRequireDefault(require(\"./RightComponents/RSelect\"));\nvar _index = _interopRequireDefault(require(\"./RightComponents/RCascader/index\"));\nvar _RTimePicker = _interopRequireDefault(require(\"./RightComponents/RTimePicker\"));\nvar _RTimeRange = _interopRequireDefault(require(\"./RightComponents/RTimeRange\"));\nvar _RDatePicker = _interopRequireDefault(require(\"./RightComponents/RDatePicker\"));\nvar _RDateRange = _interopRequireDefault(require(\"./RightComponents/RDateRange\"));\nvar _RColorPicker = _interopRequireDefault(require(\"./RightComponents/RColorPicker\"));\nvar _RRate = _interopRequireDefault(require(\"./RightComponents/RRate\"));\nvar _RSwitch = _interopRequireDefault(require(\"./RightComponents/RSwitch\"));\nvar _RSlider = _interopRequireDefault(require(\"./RightComponents/RSlider\"));\nvar _RDivider = _interopRequireDefault(require(\"./RightComponents/RDivider\"));\nvar _RUploadFile = _interopRequireDefault(require(\"./RightComponents/RUploadFile\"));\nvar _RUploadImg = _interopRequireDefault(require(\"./RightComponents/RUploadImg\"));\nvar _ComRight = _interopRequireDefault(require(\"./RightComponents/ComRight\"));\nvar _RAreaSelect = _interopRequireDefault(require(\"./RightComponents/RAreaSelect\"));\nvar _RTreeSelect = _interopRequireDefault(require(\"./RightComponents/RTreeSelect\"));\nvar _RGroupTitle = _interopRequireDefault(require(\"./RightComponents/RGroupTitle\"));\nvar _RRelationForm = _interopRequireDefault(require(\"./RightComponents/RRelationForm\"));\nvar _RRelationFormAttr = _interopRequireDefault(require(\"./RightComponents/RRelationFormAttr\"));\nvar _RCalculate = _interopRequireDefault(require(\"./RightComponents/RCalculate\"));\nvar _RPopupSelect = _interopRequireDefault(require(\"./RightComponents/RPopupSelect\"));\nvar _RAutoComplete = _interopRequireDefault(require(\"./RightComponents/RAutoComplete\"));\nvar _RPopupAttr = _interopRequireDefault(require(\"./RightComponents/RPopupAttr\"));\nvar _RTab = _interopRequireDefault(require(\"./RightComponents/RTab\"));\nvar _RCollapse = _interopRequireDefault(require(\"./RightComponents/RCollapse\"));\nvar _RTable = _interopRequireDefault(require(\"./RightComponents/RTable\"));\nvar _StyleScript = _interopRequireDefault(require(\"./StyleScript\"));\nvar _RIframe = _interopRequireDefault(require(\"./RightComponents/RIframe\"));\nvar _RSign = _interopRequireDefault(require(\"./RightComponents/RSign\"));\nvar _RLocation = _interopRequireDefault(require(\"./RightComponents/RLocation\"));\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar commonRightList = ['organizeSelect', 'depSelect', 'posSelect', 'userSelect', 'usersSelect', 'groupSelect', \"roleSelect\", 'editor'];\nvar systemList = ['createUser', 'createTime', 'modifyUser', 'modifyTime', 'currOrganize', 'currDept', 'currPosition', 'billRule'];\n//不设置宽度\nvar noWithList = ['switch', 'radio', 'checkbox', 'uploadFile', 'uploadImg', 'colorPicker', 'rate', 'link', 'button', 'text', 'alert', 'qrcode', 'barcode'];\nvar layoutList = [\"groupTitle\", 'divider', 'collapse', 'tab', 'row', 'card', 'table'];\nvar _default = exports.default = {\n  components: {\n    StyleScript: _StyleScript.default,\n    FormScript: _FormScript.default,\n    FieldDialog: _FieldDialog.default,\n    RInput: _RInput.default,\n    RTextarea: _RTextarea.default,\n    RInputNumber: _RInputNumber.default,\n    RLink: _RLink.default,\n    RText: _RText.default,\n    RAlert: _RAlert.default,\n    RRadio: _RRadio.default,\n    RCheckbox: _RCheckbox.default,\n    RSelect: _RSelect.default,\n    RCascader: _index.default,\n    RTimePicker: _RTimePicker.default,\n    RTimeRange: _RTimeRange.default,\n    RDatePicker: _RDatePicker.default,\n    RDateRange: _RDateRange.default,\n    RColorPicker: _RColorPicker.default,\n    RRate: _RRate.default,\n    RSwitch: _RSwitch.default,\n    RSlider: _RSlider.default,\n    RDivider: _RDivider.default,\n    RUploadFile: _RUploadFile.default,\n    RUploadImg: _RUploadImg.default,\n    ComRight: _ComRight.default,\n    RAreaSelect: _RAreaSelect.default,\n    RTreeSelect: _RTreeSelect.default,\n    RGroupTitle: _RGroupTitle.default,\n    RRelationForm: _RRelationForm.default,\n    RRelationFormAttr: _RRelationFormAttr.default,\n    RCalculate: _RCalculate.default,\n    RPopupSelect: _RPopupSelect.default,\n    RPopupAttr: _RPopupAttr.default,\n    RTab: _RTab.default,\n    RCollapse: _RCollapse.default,\n    TableConfig: _RTable.default,\n    RAutoComplete: _RAutoComplete.default,\n    RIframe: _RIframe.default,\n    RSign: _RSign.default,\n    RLocation: _RLocation.default\n  },\n  inject: [\"getShowType\", \"getFormInfo\"],\n  props: ['showField', 'activeData', 'formConf', 'modelType', 'webType', 'drawingList', 'formInfo'],\n  data: function data() {\n    return {\n      currentTab: 'field',\n      currentNode: null,\n      dialogVisible: false,\n      iconsVisible: false,\n      formScriptVisible: false,\n      fieldDialogVisible: false,\n      comScriptVisible: false,\n      currentIconModel: null,\n      activeScript: '',\n      activeFunc: '',\n      isConf: false,\n      noVModelList: _comConfig.noVModelList,\n      printTplList: [],\n      fieldOptions: [],\n      dictionaryOptions: [],\n      dataInterfaceOptions: [],\n      styleScriptVisible: false,\n      storageType: [{\n        label: '展示数据',\n        value: 0\n      }, {\n        label: '存储数据',\n        value: 1\n      }],\n      justifyOptions: [{\n        label: 'start',\n        value: 'start'\n      }, {\n        label: 'end',\n        value: 'end'\n      }, {\n        label: 'center',\n        value: 'center'\n      }, {\n        label: 'space-around',\n        value: 'space-around'\n      }, {\n        label: 'space-between',\n        value: 'space-between'\n      }],\n      barcodeFormatOptions: [{\n        label: 'code128',\n        value: 'code128'\n      }, {\n        label: 'ean13',\n        value: 'ean13'\n      }, {\n        label: 'ean8',\n        value: 'ean8'\n      }, {\n        label: 'ean5',\n        value: 'ean5'\n      }, {\n        label: 'ean2',\n        value: 'ean2'\n      }, {\n        label: 'code39',\n        value: 'code39'\n      }, {\n        label: 'itf14',\n        value: 'itf14'\n      }, {\n        label: 'msi10',\n        value: 'msi10'\n      }, {\n        label: 'msi11',\n        value: 'msi11'\n      }, {\n        label: 'pharmacode',\n        value: 'pharmacode'\n      }, {\n        label: 'upc',\n        value: 'upc'\n      }, {\n        label: 'codabar',\n        value: 'codabar'\n      }],\n      generalWidthOptions: ['600px', '800px', '1000px', '40%', '50%', '60%', '70%', '80%'],\n      fullScreenWidthOptions: ['800px', '1000px', '1200px', '1400px', '50%', '60%', '70%', '80%', '90%', '100%'],\n      layoutTreeProps: {\n        label: function label(data, node) {\n          var config = data.__config__;\n          return data.componentName || \"\".concat(config.label, \": \").concat(data.__vModel__);\n        }\n      },\n      noWithList: [].concat(noWithList, layoutList)\n    };\n  },\n  computed: {\n    showType: function showType() {\n      return this.getShowType();\n    },\n    changeName: function changeName() {},\n    activeTag: function activeTag() {\n      return this.activeData.__config__.tag;\n    },\n    formItemList: {\n      get: function get() {\n        return this.$store.state.generator.formItemList;\n      },\n      set: function set(val) {\n        this.$store.commit('generator/UPDATE_FORMITEM_LIST', val);\n      }\n    },\n    subTable: {\n      get: function get() {\n        return this.$store.state.generator.subTable || [];\n      },\n      set: function set(val) {\n        this.$store.commit('generator/UPDATE_SUB_TABLE', val);\n      }\n    },\n    allTable: {\n      get: function get() {\n        return this.$store.state.generator.allTable || [];\n      },\n      set: function set(val) {\n        this.$store.commit('generator/SET_ALL_TABLE', val);\n      }\n    },\n    mainTable: function mainTable() {\n      var allTable = this.$store.state.generator.allTable;\n      var item = allTable.filter(function (o) {\n        return o.typeId == '1';\n      })[0];\n      if (!item || !item.table) return '';\n      return item.table;\n    },\n    isCommon: function isCommon() {\n      return commonRightList.indexOf(this.activeData.__config__.jnpfKey) > -1;\n    },\n    isSystem: function isSystem() {\n      return systemList.indexOf(this.activeData.__config__.jnpfKey) > -1;\n    },\n    drawingOptions: function drawingOptions() {\n      var list = [];\n      var loop = function loop(data, parent) {\n        if (!data) return;\n        if (data.__config__ && data.__config__.jnpfKey !== 'table' && data.__config__.children && Array.isArray(data.__config__.children)) {\n          loop(data.__config__.children, data);\n        }\n        if (Array.isArray(data)) data.forEach(function (d) {\n          return loop(d, parent);\n        });\n        if (data.__vModel__ && data.__config__.jnpfKey !== 'table') {\n          list.push(data);\n        }\n      };\n      loop(this.drawingList);\n      return list;\n    },\n    getCompName: function getCompName() {\n      var _this = this;\n      var allComps = [].concat((0, _toConsumableArray2.default)(_config.inputComponents), (0, _toConsumableArray2.default)(_config.selectComponents), (0, _toConsumableArray2.default)(_config.systemComponents), (0, _toConsumableArray2.default)(_config.layoutComponents), [_comConfig.calculateItem], (0, _toConsumableArray2.default)(_comConfig.onlinePeculiarList));\n      var comp = allComps.filter(function (o) {\n        return o.__config__.jnpfKey === _this.activeData.__config__.jnpfKey;\n      });\n      if (!comp.length) return '';\n      return comp[0].__config__.label;\n    },\n    getScriptType: function getScriptType() {\n      return ['onLoad', 'beforeSubmit', 'afterSubmit'].includes(this.activeFunc) ? 'form' : 'formField';\n    },\n    enableFlow: function enableFlow() {\n      return this.formInfo && this.formInfo.enableFlow || false;\n    }\n  },\n  watch: {\n    formConf: {\n      handler: function handler(val) {\n        // saveFormConf(val)\n        if (val.formStyle === 'word-form' && val.labelPosition === 'top') {\n          val.labelPosition = 'left';\n        }\n      },\n      deep: true\n    },\n    activeData: function activeData(val) {\n      var _this2 = this;\n      if (!val || !val.__config__) return;\n      if (val.__config__.jnpfKey === 'relationFormAttr') {\n        this.$nextTick(function () {\n          _this2.$refs.relationFormAttr && _this2.$refs.relationFormAttr.getOptions();\n        });\n      }\n      if (val.__config__.jnpfKey === 'popupSelect' || val.__config__.jnpfKey === 'popupTableSelect') {\n        this.$nextTick(function () {\n          _this2.$refs.popupAll && _this2.$refs.popupAll.getDataInterfaceInfo();\n        });\n      }\n      if (val.__config__.jnpfKey === 'popupAttr') {\n        this.$nextTick(function () {\n          _this2.$refs.popupAttr && _this2.$refs.popupAttr.getOptions();\n        });\n      }\n      if (val.__config__.jnpfKey !== 'calculate') {\n        this.$nextTick(function () {\n          _this2.$refs.calculate && _this2.$refs.calculate.reloadExpressionTemp();\n        });\n      }\n      if (!val.__config__.tableName && val.__config__.jnpfKey !== 'table') {\n        val.__config__.tableName = this.mainTable;\n      }\n      if (!this.activeData.__config__.visibility) this.$set(this.activeData.__config__, \"visibility\", [\"pc\", \"app\"]);\n      this.setDefaultOptions();\n    }\n  },\n  created: function created() {\n    this.getDictionaryType();\n    this.getDataInterfaceSelector();\n    this.getPrintTplList();\n    if (!this.activeData || !this.activeData.__config__) return;\n    if (!this.activeData.__config__.visibility) this.$set(this.activeData.__config__, \"visibility\", [\"pc\", \"app\"]);\n    if (!this.activeData.__config__.tableName && this.activeData.__config__.jnpfKey !== 'table') {\n      this.activeData.__config__.tableName = this.mainTable;\n    }\n    this.setDefaultOptions();\n  },\n  methods: {\n    refreshPrintOptions: function refreshPrintOptions() {\n      var _this3 = this;\n      (0, _printDev.getPrintDevSelector)(2).then(function (res) {\n        var data = res.data.list;\n        var list = data.filter(function (o) {\n          return o.children && o.children.length;\n        });\n        _this3.printTplList = list.map(function (o) {\n          return _objectSpread(_objectSpread({}, o), {}, {\n            hasChildren: true\n          });\n        });\n      }).catch(function (error) {\n        reject(error);\n      });\n    },\n    // 如果要跳转新页面，请用函数包裹打开新页签。否则会出现被拦截\n    open: function open(url) {\n      window.open(url, \"_blank\");\n    },\n    // 打印模板快捷入口\n    openPrint: function openPrint() {\n      var routeUrl = this.$router.resolve({\n        path: '/system/printDev?open=true'\n      });\n      this.open(routeUrl.href);\n    },\n    addStyle: function addStyle() {\n      var _this4 = this;\n      this.$nextTick(function () {\n        _this4.styleScriptVisible = true;\n      });\n    },\n    updateStyleScript: function updateStyleScript(func) {\n      this.formConf.classJson = func;\n      this.formConf.classNames = this.spiltByDoc(func).map(function (o) {\n        return o.key;\n      });\n    },\n    spiltByDoc: function spiltByDoc(str) {\n      var func = str.trim();\n      var arr = [];\n      var cut = func.split(\"}\");\n      cut.forEach(function (item) {\n        if (item) {\n          var afterCut = item.split(\"{\");\n          var classObject = {};\n          var name = '';\n          if (afterCut[0].split(\" \").length > 1) {\n            name = afterCut[0].split(\" \")[0];\n          } else {\n            name = afterCut[0];\n          }\n          if (name.split(\"\\.\").length > 1) {\n            name = name.split(\"\\.\")[1];\n          }\n          name = name.split(\"\\:\")[0];\n          var matching = new RegExp(/^[a-zA-Z]-?.*[a-zA-Z0-9_]*$/);\n          if (matching.test(name)) {\n            classObject.key = name.replace(/\\r|\\n/ig, '').trim();\n            classObject.value = item.replace(/\\r|\\n/ig, '') + \"}\";\n            arr.push(classObject);\n          }\n        }\n      });\n      return arr;\n    },\n    addReg: function addReg() {\n      this.activeData.__config__.regList.push({\n        pattern: '',\n        message: ''\n      });\n    },\n    setDefaultValue: function setDefaultValue(val) {\n      if (Array.isArray(val)) {\n        return val.join(',');\n      }\n      // if (['string', 'number'].indexOf(typeof val) > -1) {\n      //   return val\n      // }\n      if (typeof val === 'boolean') {\n        return \"\".concat(val);\n      }\n      return val;\n    },\n    onDefaultValueInput: function onDefaultValueInput(str) {\n      if (Array.isArray(this.activeData.__config__.defaultValue)) {\n        // 数组\n        this.$set(this.activeData.__config__, 'defaultValue', str.split(',').map(function (val) {\n          return (0, _utils.isNumberStr)(val) ? +val : val;\n        }));\n      } else if (['true', 'false'].indexOf(str) > -1) {\n        // 布尔\n        this.$set(this.activeData.__config__, 'defaultValue', JSON.parse(str));\n      } else {\n        // 字符串和数字\n        this.$set(this.activeData.__config__, 'defaultValue', (0, _utils.isNumberStr)(str) ? +str : str);\n      }\n    },\n    getSubTableFiled: function getSubTableFiled(key) {\n      var item = {};\n      var list = this.subTable.filter(function (o) {\n        return o.table === key;\n      });\n      if (list.length) {\n        item = list[0];\n      }\n      var arr = [];\n      if (item && item.fields) arr = item.fields.filter(function (o) {\n        return o.primaryKey != 1;\n      });\n      return arr;\n    },\n    fieldChange1: function fieldChange1(val) {\n      var _this5 = this;\n      if (!val) return;\n      var drawingList = (0, _db.getDrawingList)() || [];\n      var boo = false;\n      var loop = function loop(list) {\n        for (var i = 0; i < list.length; i++) {\n          var e = list[i];\n          var config = e.__config__;\n          if (config.jnpfKey === 'table' && config.tableName === _this5.activeData.__config__.relationTable) {\n            for (var j = 0; j < config.children.length; j++) {\n              var child = config.children[j];\n              if (child.__vModel__ === val) {\n                boo = true;\n                break;\n              }\n            }\n          }\n          if (config && config.jnpfKey != 'table' && config.children && Array.isArray(config.children)) {\n            loop(config.children);\n          }\n        }\n      };\n      loop(drawingList);\n      if (boo) {\n        this.$message.warning(\"\\u5B50\\u8868\\u5B57\\u6BB5\\u3010\".concat(val, \"\\u3011\\u5DF2\\u5B58\\u5728,\\u8BF7\\u91CD\\u65B0\\u9009\\u62E9!\"));\n        this.activeData.__vModel__ = '';\n        return;\n      }\n      var options = this.getSubTableFiled(this.activeData.__config__.relationTable);\n      var item = options.filter(function (o) {\n        return o.field == val;\n      })[0];\n      if (!item || !item.fieldName) return;\n      this.activeData.__config__.label = item.fieldName;\n    },\n    fieldChange: function fieldChange(val) {\n      if (!val) return;\n      var drawingList = (0, _db.getDrawingList)() || [];\n      var boo = false;\n      var loop = function loop(list) {\n        for (var i = 0; i < list.length; i++) {\n          var e = list[i];\n          var config = e.__config__;\n          if (e.__vModel__ === val) {\n            boo = true;\n            break;\n          }\n          if (config && config.jnpfKey != 'table' && config.children && Array.isArray(config.children)) {\n            loop(config.children);\n          }\n        }\n      };\n      loop(drawingList);\n      if (boo) {\n        this.$message.warning(\"\\u5B57\\u6BB5\\u3010\".concat(val, \"\\u3011\\u5DF2\\u5B58\\u5728,\\u8BF7\\u91CD\\u65B0\\u9009\\u62E9!\"));\n        this.activeData.__vModel__ = '';\n        return;\n      }\n      var item = this.fieldOptions.filter(function (o) {\n        return o.realField == val;\n      })[0];\n      if (!item || !item.fieldName) return;\n      this.activeData.__config__.label = item.fieldName;\n      this.$forceUpdate();\n    },\n    inputFieldChange: function inputFieldChange(val, formId, parentVModel) {\n      if (!val) return;\n      var boo = false;\n      var childBoo = false;\n      if (parentVModel) {\n        var loop = function loop(data, parent) {\n          if (!data) return;\n          if (data.__config__ && data.__config__.children && Array.isArray(data.__config__.children)) {\n            loop(data.__config__.children, data);\n          }\n          if (Array.isArray(data)) data.forEach(function (d) {\n            return loop(d, parent);\n          });\n          if (parent && parent.__config__ && parent.__config__.jnpfKey == 'table') {\n            if (data.__vModel__ && data.__vModel__.toLowerCase() === val.toLowerCase() && data.__config__.formId !== formId && data.__config__.parentVModel === parentVModel) {\n              childBoo = true;\n              return;\n            }\n          }\n        };\n        loop((0, _db.getDrawingList)());\n      } else {\n        var _loop = function _loop(data, parent) {\n          if (!data) return;\n          if (data.__config__ && data.__config__.jnpfKey !== 'table' && data.__config__.children && Array.isArray(data.__config__.children)) {\n            _loop(data.__config__.children, data);\n          }\n          if (Array.isArray(data)) data.forEach(function (d) {\n            return _loop(d, parent);\n          });\n          if (data.__vModel__ && data.__vModel__.toLowerCase() === val.toLowerCase() && data.__config__.formId !== formId) {\n            boo = true;\n            return;\n          }\n        };\n        _loop((0, _db.getDrawingList)());\n      }\n      if (boo) {\n        this.$message.warning(\"\\u5B57\\u6BB5\\u3010\".concat(val, \"\\u3011\\u5DF2\\u5B58\\u5728,\\u8BF7\\u91CD\\u65B0\\u8F93\\u5165!\"));\n        this.activeData.__vModel__ = '';\n        return;\n      }\n      if (childBoo) {\n        this.$message.warning(\"\\u5B50\\u8868\\u5B57\\u6BB5\\u3010\".concat(val, \"\\u3011\\u5DF2\\u5B58\\u5728,\\u8BF7\\u91CD\\u65B0\\u8F93\\u5165!\"));\n        this.activeData.__vModel__ = '';\n      }\n    },\n    tableChange: function tableChange() {\n      this.activeData.__vModel__ = '';\n      this.setDefaultOptions();\n    },\n    changeStorage: function changeStorage() {\n      var _this6 = this;\n      this.activeData.__vModel__ = '';\n      if (this.activeData.isStorage == 0) this.activeData.__vModel__ = '';\n      if (!this.$store.getters.hasTable && this.activeData.isStorage == 1) this.$emit('setVModel', this.activeData);\n      var loop = function loop(list) {\n        for (var i = 0; i < list.length; i++) {\n          var e = list[i];\n          var config = e.__config__;\n          if (config.jnpfKey === 'table' && e.__vModel__ === _this6.activeData.__config__.parentVModel) {\n            _this6.activeData.__config__.relationTable = config.tableName;\n          }\n          if (config && config.jnpfKey != 'table' && config.children && Array.isArray(config.children)) {\n            loop(config.children);\n          }\n        }\n      };\n      loop(this.drawingList);\n    },\n    setDefaultOptions: function setDefaultOptions() {\n      var _this7 = this;\n      if (!this.$store.getters.hasTable) return;\n      if (this.activeData.__vModel__ === undefined && this.activeData.isStorage != 1 || this.activeData.__config__.jnpfKey === 'table') return;\n      if (!this.activeData.__config__.tableName || this.activeData.__config__.tableName === this.mainTable) {\n        var fieldOptions = this.formItemList.map(function (o) {\n          return _objectSpread(_objectSpread({}, o), {}, {\n            realField: o.field\n          });\n        });\n        this.fieldOptions = fieldOptions.filter(function (o) {\n          return o.primaryKey != 1;\n        });\n      } else {\n        var list = this.allTable.filter(function (o) {\n          return o.table === _this7.activeData.__config__.tableName;\n        });\n        if (!list.length) {\n          this.activeData.__config__.tableName = this.mainTable;\n          var _fieldOptions = this.formItemList.map(function (o) {\n            return _objectSpread(_objectSpread({}, o), {}, {\n              realField: o.field\n            });\n          });\n          this.fieldOptions = _fieldOptions.filter(function (o) {\n            return o.primaryKey != 1;\n          });\n          this.activeData.__vModel__ = '';\n        } else {\n          var item = list[0];\n          var options = item.fields.map(function (o) {\n            return _objectSpread(_objectSpread({}, o), {}, {\n              realField: 'jnpf_' + _this7.activeData.__config__.tableName + '_jnpf_' + o.field\n            });\n          });\n          this.fieldOptions = options.filter(function (o) {\n            return o.primaryKey != 1;\n          });\n        }\n      }\n    },\n    spanChange: function spanChange(val) {\n      this.formConf.span = val;\n    },\n    onTableNameChange: function onTableNameChange(tableName) {\n      if (!tableName) return;\n      var drawingList = (0, _db.getDrawingList)() || [];\n      var boo = false;\n      var loop = function loop(list) {\n        for (var i = 0; i < list.length; i++) {\n          var e = list[i];\n          var config = e.__config__;\n          if (config.jnpfKey === 'table' && config.tableName === tableName) {\n            boo = true;\n            break;\n          }\n          if (config && config.jnpfKey != 'table' && config.children && Array.isArray(config.children)) {\n            loop(config.children);\n          }\n        }\n      };\n      loop(drawingList);\n      if (boo) {\n        this.$message.warning(\"\\u5B50\\u8868\\u3010\".concat(tableName, \"\\u3011\\u5DF2\\u5B58\\u5728,\\u8BF7\\u91CD\\u65B0\\u9009\\u62E9!\"));\n        this.activeData.__config__.tableName = '';\n        return;\n      }\n      for (var i = 0; i < this.activeData.__config__.children.length; i++) {\n        this.$set(this.activeData.__config__.children[i].__config__, 'relationTable', tableName);\n        this.$set(this.activeData.__config__.children[i], '__vModel__', '');\n      }\n    },\n    onBorderWidthChange: function onBorderWidthChange(val) {\n      var _this8 = this;\n      if (!val) this.$nextTick(function () {\n        return _this8.$set(_this8.activeData.__config__, 'borderWidth', 1);\n      });\n    },\n    getDictionaryType: function getDictionaryType() {\n      var _this9 = this;\n      (0, _dictionary.getDictionaryTypeSelector)().then(function (res) {\n        _this9.dictionaryOptions = res.data.list.filter(function (o) {\n          return o.children && o.children.length;\n        });\n      });\n    },\n    getDataInterfaceSelector: function getDataInterfaceSelector() {\n      var _this10 = this;\n      (0, _dataInterface.getDataInterfaceSelector)().then(function (res) {\n        _this10.dataInterfaceOptions = res.data;\n      });\n    },\n    getPrintTplList: function getPrintTplList() {\n      var _this11 = this;\n      this.$store.dispatch('base/getPrintFormTree').then(function (res) {\n        var list = res.filter(function (o) {\n          return o.children && o.children.length;\n        });\n        _this11.printTplList = list.map(function (o) {\n          return _objectSpread(_objectSpread({}, o), {}, {\n            hasChildren: true\n          });\n        });\n      });\n    },\n    getTipText: function getTipText(key) {\n      var text = '';\n      switch (key) {\n        case 'change':\n          text = '发生变化时触发';\n          break;\n        case 'blur':\n          text = '失去焦点时触发';\n          break;\n        case 'click':\n          text = '点击时触发';\n          break;\n        case 'tabClick':\n          text = '面板点击时触发';\n          break;\n        default:\n          text = '';\n          break;\n      }\n      return text;\n    },\n    updateScript: function updateScript(data) {\n      if (this.isConf) {\n        this.formConf.funcs[this.activeFunc] = data;\n      } else {\n        this.activeData.on[this.activeFunc] = data;\n      }\n    },\n    editFunc: function editFunc(str, funcName, isConf) {\n      this.activeScript = str;\n      this.activeFunc = funcName;\n      this.isConf = isConf || false;\n      this.formScriptVisible = true;\n    },\n    openFieldDialog: function openFieldDialog() {\n      var _this12 = this;\n      var tableName = '';\n      if (!this.activeData.__config__.isSubTable) {\n        tableName = this.activeData.__config__.tableName;\n      } else {\n        tableName = this.activeData.__config__.relationTable;\n      }\n      var dataBase = this.$store.state.generator.dataBase || '0';\n      this.fieldDialogVisible = true;\n      this.$nextTick(function () {\n        _this12.$refs.fieldDialog.init(dataBase, tableName);\n      });\n    },\n    updateFieldOptions: function () {\n      var _updateFieldOptions = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee(data) {\n        var tableName, queryType, type, res, fields, i;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              tableName = '';\n              if (!this.activeData.__config__.isSubTable) {\n                tableName = this.activeData.__config__.tableName;\n              } else {\n                tableName = this.activeData.__config__.relationTable;\n              }\n              queryType = 0, type = this.getFormInfo().type;\n              if (type == 3 || type == 4 || type == 5) queryType = 1;\n              _context.next = 6;\n              return (0, _dataModel.DataModelFieldList)(this.getFormInfo().dbLinkId, tableName, queryType);\n            case 6:\n              res = _context.sent;\n              fields = res.data.list;\n              i = 0;\n            case 9:\n              if (!(i < this.allTable.length)) {\n                _context.next = 16;\n                break;\n              }\n              if (!(this.allTable[i].table === tableName)) {\n                _context.next = 13;\n                break;\n              }\n              this.allTable[i].fields = fields;\n              return _context.abrupt(\"break\", 16);\n            case 13:\n              i++;\n              _context.next = 9;\n              break;\n            case 16:\n              if (!this.activeData.__config__.isSubTable) {\n                if (this.activeData.__config__.tableName === this.mainTable) this.formItemList = fields;\n                this.setDefaultOptions();\n              } else {\n                this.subTable = this.allTable.filter(function (o) {\n                  return o.typeId == '0';\n                });\n              }\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function updateFieldOptions(_x) {\n        return _updateFieldOptions.apply(this, arguments);\n      }\n      return updateFieldOptions;\n    }(),\n    onBarcodeTextChange: function onBarcodeTextChange(val) {\n      if (!val) return;\n      var reg = /^[A-Za-z0-9]+$/;\n      if (!reg.test(val)) {\n        this.$message({\n          message: '固定值请输入数字或者英文字母',\n          type: 'error',\n          duration: 1500\n        });\n      }\n    },\n    onRuleChange: function onRuleChange(id, item) {\n      if (!id) {\n        this.activeData.__config__.rule = '';\n        this.activeData.__config__.ruleName = '';\n        return;\n      }\n      if (this.activeData.__config__.rule === id) return;\n      this.activeData.__config__.rule = id;\n      this.activeData.__config__.ruleName = item.fullName;\n    },\n    addComponent: function addComponent(item, parent) {\n      this.$emit('copyItem', item, parent, false);\n    }\n  }\n};",null]}