{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/msgCenter/sendConfig/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/msgCenter/sendConfig/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getSendConfigList, delMsgTemplate, copySendConfig } from '@/api/msgCenter/sendConfig'\nimport Form from './Form'\nimport TestSend from './TestSend'\nimport Detail from './Detail'\n\nexport default {\n  name: 'msgCenter-sendConfig',\n  components: { Form, TestSend, Detail },\n  data() {\n    return {\n      showAll: false,\n      list: [],\n      total: 0,\n      btnLoading: false,\n      listLoading: true,\n      listQuery: {\n        keyword: '',\n        enabledMark: '',\n        templateType: '',\n        messageSource: '',\n        currentPage: 1,\n        pageSize: 20\n      },\n      formVisible: false,\n      testSendVisible: false,\n      viewVisible: false,\n      templateTypeList: [\n        { fullName: \"系统模板\", enCode: '1' },\n        { fullName: \"自定义模板\", enCode: '0' }\n      ],\n      enabledMarkList: [\n        { fullName: \"启用\", enCode: '1' },\n        { fullName: \"禁用\", enCode: '0' },\n      ],\n      messageSourceList: [],\n      colorList: ['', 'rgba(40, 112, 248, 0.1)', 'rgba(109, 224, 131, 0.1)', 'rgba(244, 130, 130, 0.1)',\n        'rgba(104, 147, 245, 0.1)', 'rgba(100, 176, 244, 0.1)', 'rgba(255, 150, 178, 0.1)', 'rgba(156, 130, 244, 0.1)']\n    }\n  },\n  created() {\n    this.initData()\n    this.getMsgTypeList()\n  },\n  methods: {\n    initData() {\n      this.listLoading = true\n      getSendConfigList(this.listQuery).then(res => {\n        this.list = res.data.list\n        this.total = res.data.pagination.total\n        this.listLoading = false\n        this.btnLoading = false\n      }).catch(() => {\n        this.listLoading = false\n        this.btnLoading = false\n      })\n\n    },\n    getMsgTypeList() {\n      this.$store.dispatch('base/getDictionaryData', { sort: 'msgSourceType' }).then((res) => {\n        this.messageSourceList = res\n      })\n    },\n    addEditData(id) {\n      this.formVisible = true\n      this.$nextTick(() => {\n        this.$refs.Form.init(id)\n      })\n    },\n    handleCopy(id) {\n      this.$confirm('您确定要复制该数据, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(() => {\n        copySendConfig(id).then(res => {\n          this.$message({\n            type: 'success',\n            message: res.msg,\n            duration: 1000,\n            onClose: () => {\n              this.initData()\n            }\n          });\n        })\n      }).catch(() => { });\n    },\n    handleTestSend(id) {\n      this.testSendVisible = true\n      this.$nextTick(() => {\n        this.$refs.TestSend.init(id)\n      })\n    },\n    handleView(item) {\n      this.viewVisible = true\n      this.$nextTick(() => {\n        this.$refs.Detail.init(item.id, item.messageSource)\n      })\n    },\n    handleDel(id) {\n      this.$confirm(this.$t('common.delTip'), this.$t('common.tipTitle'), {\n        type: 'warning'\n      }).then(() => {\n        delMsgTemplate(id).then(res => {\n          this.$message({\n            type: 'success',\n            message: res.msg,\n            duration: 1500,\n            onClose: () => {\n              this.initData()\n            }\n          })\n        })\n      }).catch(() => { })\n    },\n    search() {\n      this.listQuery.currentPage = 1\n      this.listQuery.pageSize = 20\n      this.listQuery.sort = 'desc'\n      this.initData()\n    },\n    reset() {\n      this.listQuery.keyword = ''\n      this.listQuery.templateType = ''\n      this.listQuery.enabledMark = ''\n      this.listQuery.messageSource = ''\n      this.search()\n    },\n    closeForm(isRefresh) {\n      this.formVisible = false\n      if (isRefresh) this.initData()\n    },\n  }\n}\n",null]}