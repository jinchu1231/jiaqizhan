{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/components/VisualPortal/PortalDesign/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/components/VisualPortal/PortalDesign/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _portal = require(\"@/api/onlineDev/portal\");\nvar _components = _interopRequireDefault(require(\"./components\"));\nvar _useRedo = _interopRequireDefault(require(\"@/components/VisualPortal/mixins/useRedo\"));\nvar _releaseDialog = _interopRequireDefault(require(\"@/views/onlineDev/visualPortal/releaseDialog\"));\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = exports.default = {\n  mixins: [_useRedo.default],\n  components: {\n    PortalDesigner: _components.default,\n    ReleaseDialog: _releaseDialog.default\n  },\n  data: function data() {\n    return {\n      currRow: {},\n      visible: false,\n      loading: false,\n      formVisible: false,\n      btnLoading: false,\n      formData: null,\n      categoryList: [],\n      showType: 'pc',\n      fullName: '',\n      id: '',\n      key: false,\n      showFullName: false,\n      releaseDialog: false\n    };\n  },\n  methods: {\n    init: function init(row) {\n      var _this = this;\n      this.currRow = row;\n      this.visible = true;\n      this.loading = false;\n      this.formData = null;\n      this.fullName = row.fullName;\n      this.btnLoading = false;\n      this.showType = 'pc';\n      this.initRedo();\n      this.$nextTick(function () {\n        if (_this.currRow.id) {\n          _this.loading = true;\n          (0, _portal.getPortalInfo)(_this.currRow.id).then(function (res) {\n            _this.loading = false;\n            _this.formData = JSON.parse(res.data.formData);\n          }).catch(function () {\n            _this.loading = false;\n          });\n        }\n      });\n    },\n    dataFormSubmit: function dataFormSubmit(type) {\n      var _this2 = this;\n      this.$refs['portalDesigner'].getData().then(function (res) {\n        _this2.btnLoading = true;\n        _this2.formData = res.formData;\n        var query = {\n          type: _this2.currRow.type,\n          formData: JSON.stringify(_this2.formData),\n          id: _this2.currRow.id\n        };\n        var formMethod = _this2.currRow.id ? _portal.Update : _portal.Create;\n        formMethod(query).then(function (res) {\n          _this2.$message({\n            message: res.msg,\n            type: 'success',\n            duration: 1500,\n            onClose: function onClose() {\n              _this2.btnLoading = false;\n              if (type == 1) {\n                _this2.$nextTick(function () {\n                  _this2.releaseDialog = true;\n                  _this2.$refs.release.openRelease(_this2.currRow);\n                });\n              } else {\n                _this2.closeDialog(true);\n              }\n            }\n          });\n        }).catch(function () {\n          _this2.btnLoading = false;\n        });\n      }).catch(function (err) {\n        err.msg && _this2.$message.warning(err.msg);\n      });\n    },\n    closeDialog: function closeDialog(isRefresh) {\n      this.visible = false;\n      this.$emit('close', isRefresh);\n    },\n    handleRedoAndUndo: function handleRedoAndUndo(func) {\n      this[func](this.$refs.portalDesigner.handleData);\n    },\n    preview: function preview() {\n      this.$refs.portalDesigner.preview();\n    },\n    empty: function empty() {\n      this.$refs.portalDesigner.empty();\n    },\n    handleAddRecord: function handleAddRecord(val) {\n      this.addRecord(val);\n    }\n  }\n};",null]}