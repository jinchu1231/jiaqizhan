{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js!/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/onlineDev/webDesign/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/onlineDev/webDesign/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/babel.config.js","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/\\u4EA4\\u5B89/gas/vue/gas-web/node_modules/_@babel_runtime@7.24.5@@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _Form = _interopRequireDefault(require(\"./Form\"));\nvar _ViewForm = _interopRequireDefault(require(\"./ViewForm\"));\nvar _ShortLinkDialog = _interopRequireDefault(require(\"./ShortLinkDialog\"));\nvar _AddBox = _interopRequireDefault(require(\"@/views/generator/AddBox\"));\nvar _index = _interopRequireDefault(require(\"@/mixins/generator/index\"));\nvar _PreviewDialog = _interopRequireDefault(require(\"@/components/PreviewDialog\"));\nvar _visualDev = require(\"@/api/onlineDev/visualDev\");\nvar _menu = require(\"@/api/system/menu\");\nvar _Form2 = _interopRequireDefault(require(\"@/views/workFlow/flowEngine/Form\"));\nvar _FlowManagement = _interopRequireDefault(require(\"@/views/workFlow/flowEngine/FlowManagement\"));\nvar _FormDesign = require(\"@/api/workFlow/FormDesign\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = exports.default = {\n  name: 'onlineDev-webDesign',\n  mixins: [_index.default],\n  components: {\n    Form: _Form.default,\n    ViewForm: _ViewForm.default,\n    AddBox: _AddBox.default,\n    previewDialog: _PreviewDialog.default,\n    EngineForm: _Form2.default,\n    FlowManage: _FlowManagement.default,\n    LinkDialog: _ShortLinkDialog.default\n  },\n  data: function data() {\n    return {\n      showAll: false,\n      query: {\n        keyword: '',\n        type: 1\n      },\n      sort: 'webDesign',\n      previewDialogVisible: false,\n      releaseDialogVisible: false,\n      releaseBtnLoading: false,\n      currRow: {},\n      releaseQuery: {\n        pc: 1,\n        app: 1,\n        pcModuleParentId: '',\n        appModuleParentId: '',\n        systemId: ''\n      },\n      releaseQueryRule: {\n        pcModuleParentId: [{\n          required: true,\n          message: '上级菜单不能为空',\n          trigger: 'change'\n        }],\n        appModuleParentId: [{\n          required: true,\n          message: '上级菜单不能为空',\n          trigger: 'change'\n        }]\n      },\n      treeData: [],\n      appTreeData: [],\n      pcSystemId: \"\",\n      appSystemId: \"\",\n      previewType: \"\",\n      enginCategoryList: [],\n      engineFormVisible: false,\n      manageVisible: false,\n      linkVisible: false,\n      viewFormVisible: false\n    };\n  },\n  created: function created() {\n    this.getEnginCategoryList();\n  },\n  methods: {\n    preview: function preview(id, type) {\n      var _this = this;\n      this.currId = id;\n      this.previewType = type;\n      this.$nextTick(function () {\n        _this.previewDialogVisible = true;\n      });\n    },\n    releaseModel: function releaseModel() {\n      var _this2 = this;\n      this.$refs['releaseForm'].validate(function (valid) {\n        if (!valid) return;\n        _this2.$confirm('发布模板会覆盖当前线上版本且进行菜单同步，是否继续？', '提示', {\n          type: 'warning'\n        }).then(function () {\n          setTimeout(function () {\n            _this2.release();\n          }, 200);\n        });\n      });\n    },\n    openReleaseDialog: function openReleaseDialog(row) {\n      var _this3 = this;\n      this.currRow = row;\n      this.releaseDialogVisible = true;\n      this.pcSystemId = \"\";\n      this.appSystemId = \"\";\n      this.releaseQuery = {\n        pc: !row.pcIsRelease && !row.appIsRelease ? 1 : row.pcIsRelease,\n        app: !row.pcIsRelease && !row.appIsRelease ? 1 : row.appIsRelease,\n        pcModuleParentId: '',\n        appModuleParentId: ''\n      };\n      this.$nextTick(function () {\n        _this3.$refs['releaseForm'] && _this3.$refs['releaseForm'].resetFields();\n      });\n      this.getMenuSelector();\n      this.getAPPMenuSelector();\n    },\n    selectToggle: function selectToggle(key) {\n      this.releaseQuery[key] = this.releaseQuery[key] === 1 ? 0 : 1;\n      var type = key == 'pc' ? 'pcModuleParentId' : 'appModuleParentId';\n      this.$refs.releaseForm.clearValidate(type);\n    },\n    treeSelectChange: function treeSelectChange(data, type) {\n      var systemId = data[1].systemId;\n      if (type == 'pc') this.pcSystemId = systemId;\n      if (type == 'app') this.appSystemId = systemId;\n    },\n    // 发布菜单\n    release: function release() {\n      var _this4 = this;\n      if (!this.releaseQuery.pc && !this.releaseQuery.app) return this.$message.error('请至少选择一种菜单同步方式');\n      this.releaseBtnLoading = true;\n      this.releaseQuery.pcSystemId = this.pcSystemId;\n      this.releaseQuery.appSystemId = this.appSystemId;\n      (0, _visualDev.Release)(this.currRow.id, this.releaseQuery).then(function (res) {\n        _this4.releaseBtnLoading = false;\n        _this4.releaseDialogVisible = false;\n        _this4.initData();\n        _this4.$message({\n          type: 'success',\n          message: res.msg,\n          duration: 1000\n        });\n      }).catch(function () {\n        _this4.releaseBtnLoading = false;\n      });\n    },\n    getMenuSelector: function getMenuSelector() {\n      var _this5 = this;\n      (0, _menu.getMenuSelector)({\n        category: 'Web'\n      }, 0).then(function (res) {\n        _this5.treeData = res.data.list;\n      });\n    },\n    getAPPMenuSelector: function getAPPMenuSelector() {\n      var _this6 = this;\n      (0, _menu.getMenuSelector)({\n        category: 'App'\n      }, 0).then(function (res) {\n        _this6.appTreeData = res.data.list || [];\n        for (var index = 0; index < _this6.appTreeData.length; index++) {\n          var item = _this6.appTreeData[index];\n          if (item.type == 0) {\n            item.disabled = true;\n          }\n        }\n      });\n    },\n    getEnginCategoryList: function getEnginCategoryList() {\n      var _this7 = this;\n      this.$store.dispatch('base/getDictionaryData', {\n        sort: 'WorkFlowCategory'\n      }).then(function (res) {\n        _this7.enginCategoryList = res;\n      });\n    },\n    showManage: function showManage(id, fullName) {\n      var _this8 = this;\n      this.manageVisible = true;\n      this.$nextTick(function () {\n        _this8.$refs.FlowManage.init(id, fullName);\n      });\n    },\n    handleEngine: function handleEngine(id) {\n      var _this9 = this;\n      (0, _FormDesign.getFormById)(id).then(function (res1) {\n        var flowId = res1.data && res1.data.id;\n        _this9.engineFormVisible = true;\n        _this9.$nextTick(function () {\n          _this9.$refs.engineForm.init(_this9.enginCategoryList, flowId, 1);\n        });\n      });\n    },\n    handleLink: function handleLink(id) {\n      var _this10 = this;\n      this.linkVisible = true;\n      this.$nextTick(function () {\n        _this10.$refs.LinkDialog.init(id);\n      });\n    }\n  }\n};",null]}