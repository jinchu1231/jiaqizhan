{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/components/JNPFImport/index.vue?vue&type=template&id=509e5452&scoped=true","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/components/JNPFImport/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<el-dialog title=\"批量导入\" :close-on-click-modal=\"false\" :visible.sync=\"visible\"\n  class=\"JNPF-dialog JNPF-dialog_center JNPF-dialog-import\" lock-scroll width=\"1000px\">\n  <el-steps :active=\"active\" align-center>\n    <el-step title=\"上传文件\"></el-step>\n    <el-step title=\"数据预览\"></el-step>\n    <el-step title=\"导入数据\"></el-step>\n  </el-steps>\n  <div class=\"import-main\" v-show=\"active==1\">\n    <div class=\"upload\">\n      <div class=\"up_left\">\n        <img src=\"@/assets/images/upload.png\">\n      </div>\n      <div class=\"up_right\">\n        <p class=\"title\">上传填好的数据表</p>\n        <p class=\"tip\">文件后缀名必须是xls或xlsx，文件大小不超过500KB，最多支持导入1000条数据</p>\n        <el-upload :action=\"actionUrl\" :headers=\"{ Authorization: $store.getters.token}\"\n          :on-success=\"handleSuccess\" :on-remove=\"handleRemove\" :before-remove=\"beforeRemove\"\n          :on-change=\"handleChange\" :file-list=\"fileList\" accept=\".xls,.xlsx\"\n          :before-upload=\"beforeUpload\" class=\"upload-area\">\n          <el-button type=\"text\">上传文件</el-button>\n        </el-upload>\n      </div>\n    </div>\n    <div class=\"upload\">\n      <div class=\"up_left\">\n        <img src=\"@/assets/images/import.png\">\n      </div>\n      <div class=\"up_right\">\n        <p class=\"title\">填写导入数据信息</p>\n        <p class=\"tip\">请按照数据模板的格式准备导入数据，模板中的表头名称不可更改，表头行不能删除</p>\n        <el-button type=\"text\" @click=\"templateDownload\">下载模板</el-button>\n      </div>\n    </div>\n  </div>\n  <div class=\"import-main\" v-show=\"active==2\">\n    <JNPF-table v-loading=\"listLoading\" :data=\"list\" :span-method=\"arraySpanMethod\">\n      <el-table-column :prop=\"item.id\" :label=\"item.fullName\" min-width=\"150\"\n        v-for=\"(item,index) in headerList\" :key=\"index\" :align=\"item.children?'center':'left'\">\n        <template slot-scope=\"scope\" v-if=\"!item.children\">\n          <el-input v-model=\"scope.row[item.id]\" />\n        </template>\n        <template v-if=\"item.children && item.jnpfKey=='table'\">\n          <el-table-column :prop=\"item.id+'-'+it.id\" :label=\"it.fullName\"\n            :width=\"it.id=='delete'?50:150\" v-for=\"(it,i) in item.children\" :key=\"i\"\n            class-name=\"child-table-box\">\n            <template slot-scope=\"scope\">\n              <div class=\"child-table-column\">\n                <tr v-for=\"(row,j) in scope.row[item.id]\" :key=\"j\"\n                  class=\"child-table__row no-border-bottom\">\n                  <td v-for=\"(obj,k) in item.children\" :key=\"k\"\n                    :class=\"obj.id=='delete'?'delete':'td-flex-1 m-0-10'\">\n                    <el-input v-model=\"row[obj.id]\" v-if=\"obj.id!='delete'\" />\n                    <el-button v-else size=\"mini\" type=\"text\" class=\"JNPF-table-delBtn\"\n                      @click=\"handleTableDel(scope.$index,j,item)\">删除</el-button>\n                  </td>\n                </tr>\n              </div>\n            </template>\n          </el-table-column>\n        </template>\n        <template v-if=\"item.children && item.jnpfKey==='complexHeader'\">\n          <el-table-column :prop=\"it.id\" :label=\"it.fullName\"\n          min-width=\"150\" v-for=\"(it,i) in item.children\" :key=\"i\" >\n            <template slot-scope=\"scope\" >\n          <el-input v-model=\"scope.row[it.id]\" />\n        </template>\n         </el-table-column>\n        </template> \n      </el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"50\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"text\" class=\"JNPF-table-delBtn\"\n            @click=\"handleDel(scope.$index)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </JNPF-table>\n  </div>\n  <div class=\"import-main import-main-overflow\" v-show=\"active==3\">\n    <div class=\"success\" v-if=\"!result.resultType\">\n      <img src=\"@/assets/images/success.png\" alt=\"\">\n      <p class=\"success-title\">批量导入成功</p>\n      <p class=\"success-tip\">您已成功导入{{result.snum}}条数据</p>\n    </div>\n    <div class=\"unsuccess\" v-if=\"result.resultType\">\n      <el-alert title=\"错误提醒：导入失败数据展示\" type=\"warning\" show-icon :closable=\"false\" />\n      <div class=\"upload error-show\">\n        <div class=\"up_left\">\n          <img class=\"\" src=\"@/assets/images/tip.png\">\n        </div>\n        <div class=\"up_right\">\n          <p class=\"tip\">正常数量条数：<el-link type=\"success\" :underline=\"false\">{{result.snum}}条\n            </el-link>\n          </p>\n          <p class=\"tip\">异常数量条数：<el-link type=\"danger\" :underline=\"false\">{{result.fnum}}条\n            </el-link>\n          </p>\n        </div>\n      </div>\n      <div class=\"contips\">\n        <p>以下文件数据为导入异常数据</p>\n        <el-button type=\"text\" icon=\"el-icon-upload2\" @click=\"exportExceptionData\">导出异常数据\n        </el-button>\n      </div>\n      <JNPF-table v-loading=\"listLoading\" :data=\"resultList\" :span-method=\"arraySpanMethod\">\n        <el-table-column :prop=\"item.id\" :label=\"item.fullName\" min-width=\"150\"\n          v-for=\"(item,index) in resultHeaderList\" :key=\"index\"\n          :align=\"item.children?'center':'left'\">\n          <template slot-scope=\"scope\" v-if=\"!item.children\">\n            {{scope.row[item.id]}}\n          </template>\n          <template v-if=\"item.children && item.jnpfKey=='table'\" >\n            <el-table-column :prop=\"item.id+'-'+it.id\" :label=\"it.fullName\"\n              :width=\"it.id=='delete'?50:150\" v-for=\"(it,i) in item.children\" :key=\"i\"\n              class-name=\"child-table-box\">>\n              <template slot-scope=\"scope\">\n                <div class=\"child-table-column\">\n                  <tr v-for=\"(row,j) in scope.row[item.id]\" :key=\"j\"\n                    class=\"child-table__row no-border-bottom\">\n                    <td v-for=\"(obj,k) in item.children\" :key=\"k\"\n                      :class=\"obj.id=='delete'?'delete':'td-flex-1 m-0-10'\">\n                      {{row[obj.id]}}\n                    </td>\n                  </tr>\n                </div>\n              </template>\n            </el-table-column>\n          </template>\n          <template v-if=\"item.children && item.jnpfKey==='complexHeader'\">\n          <el-table-column :prop=\"it.id\" :label=\"it.fullName\"\n          min-width=\"150\" v-for=\"(it,i) in item.children\" :key=\"i\" >\n         </el-table-column>\n        </template> \n        </el-table-column>\n        <el-table-column label=\"异常原因\" prop=\"errorsInfo\" fixed=\"right\" width=\"150\">\n        </el-table-column>\n      </JNPF-table>\n    </div>\n  </div>\n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"cancel()\" v-if=\"active == 1\">取 消</el-button>\n    <el-button @click=\"prev\" v-if=\"active == 2\">上一步</el-button>\n    <el-button @click=\"next\" type=\"primary\" v-if=\"active < 3\" :loading=\"btnLoading\"\n      :disabled=\"active == 1 && !fileName\">下一步\n    </el-button>\n    <el-button @click=\"cancel(true)\" type=\"primary\" v-else>关 闭</el-button>\n  </span>\n  <SelectFlow ref=\"selectFlow\" v-if=\"flowListVisible\" @selectFlow='selectFlow' />\n</el-dialog>\n",null]}