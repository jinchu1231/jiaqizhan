{"remainingRequest":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!/Users/交安/gas/vue/gas-web/src/views/system/menu/components/connectForm/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/交安/gas/vue/gas-web/src/views/system/menu/components/connectForm/index.vue","mtime":1706684850000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_babel-loader@8.3.0@babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/交安/gas/vue/gas-web/node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { saveLinkData } from \"@/api/system/authorize\";\nimport dataTable from './DataTable.vue'\nexport default {\n  components: { dataTable },\n  data() {\n    return {\n      inputHovering: false,\n      visible: false,\n      formLoading: false,\n      btnLoading: false,\n      dataForm: {\n        id: \"\",\n        dbLinkId: \"0\",\n        dataSelect: \"\"\n      },\n      moduleId: \"\",\n      dataRule: {\n        dbLinkId: [\n          { required: true, message: \"数据库不能为空\", trigger: \"change\" }\n        ],\n        dataSelect: [\n          { required: true, message: \"数据表不能为空\", trigger: \"change\" }\n        ]\n      },\n      dbOptions: [],\n      type: 0,\n      dataType: \"\"\n    };\n  },\n  methods: {\n    init(dataList, moduleId, dbOptions, dataType, type) {\n      this.dataType = dataType\n      this.moduleId = moduleId\n      this.type = type || 1\n      this.visible = true;\n      this.dbOptions = dbOptions;\n      this.$nextTick(() => {\n        this.$refs['dataForm'].resetFields()\n        if (dataList) {\n          this.dataForm.id = dataList.id || ''\n          this.dataForm.dbLinkId = dataList.linkId || '0'\n          this.dataForm.dataSelect = dataList.linkTables ? dataList.linkTables.split(\",\") : []\n        }\n      })\n    },\n    onDataChange(val) {\n      if (val && val.length) this.$refs['dataForm'].clearValidate()\n    },\n    dataFormSubmit() {\n      this.$refs[\"dataForm\"].validate(valid => {\n        if (valid) {\n          let query = {\n            id: this.dataForm.id,\n            moduleId: this.moduleId,\n            linkId: this.dataForm.dbLinkId,\n            linkTables: this.dataForm.dataSelect.toString(),\n            dataType: this.dataType\n          }\n          saveLinkData(query).then(res => {\n            this.$emit(\"refreshDataList\", this.dataForm.dataSelect.toString());\n            this.visible = false;\n          }).catch(() => { });\n        }\n      });\n    },\n    onDbChange() {\n      this.dataForm.dataSelect = ''\n    },\n  }\n};\n",null]}